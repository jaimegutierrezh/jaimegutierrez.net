{
  "hash": "4c3352bad2558d7a048b2f6fbf32539e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Taller de periodismo de datos\"\nsubtitle: \"\"\nauthor: \"\"\nformat:\n  closeread-html:\n    theme: [style.scss]\n    toc: true\n    toc-title: √çndice\n    toc-depth: 5\n    toc-location: left\n    number-sections: true\n    cr-style:\n      narrative-background-color-overlay: white\n      narrative-text-color-overlay: black\n      narrative-border-radius: 0\n      narrative-background-color-sidebar: white\n      section-background-color: white\n      narrative-overlay-min-width: 80%\nembed-resources: true\nexecute: \n  echo: false\nprefer-html: true\n---\n\n\n\nJaime Guti√©rrez ¬∑ *√öltima actualizaci√≥n: abril 2025*\n\n## üëã Introducci√≥n\n\n### üõ† Nuestra caja de herramientas\n\n+:-------------------------------------------:+:------------------------------------------:+:---------------------------------------:+:-------------------------------------:+:--------------------------------------------------------------------------------------------------------:+\n| ![](img/google_logo.png){width=\"50%\"}       | ![](img/datawrapper_logo.png){width=\"50%\"} | ![](img/flourish_logo.png){width=\"50%\"} | ![](img/tabula_logo.png){width=\"50%\"} | ![](img/tablecapture_logo.png){width=\"50%\"}                                                              |\n+---------------------------------------------+--------------------------------------------+-----------------------------------------+---------------------------------------+----------------------------------------------------------------------------------------------------------+\n| Cuenta de\\                                  | Cuenta de\\                                 | Cuenta de\\                              | Instalar\\                             | Descargar\\                                                                                               |\n| [Gmail](https://accounts.google.com/signin) | [Datawrapper](https://www.datawrapper.de/) | [Flourish](https://flourish.studio/)    | [Tabula](https://tabula.technology/)  | [Table Capture](https://chromewebstore.google.com/detail/table-capture/iebpjdmgckacbodjpijphcplhebcmeop) |\n+---------------------------------------------+--------------------------------------------+-----------------------------------------+---------------------------------------+----------------------------------------------------------------------------------------------------------+\n\n## üë∑‚Äç‚ôÄÔ∏è Metodolog√≠a de trabajo\n\n### üö≤ Caso pr√°ctico. Estaciones Sevici (I)\n\nA partir de los datos de los aparcabicis del servicio municipal de Sevilla, Sevici, obtenidos en el portal de datos abiertos del Ayuntamiento, responde a las siguientes preguntas:\n\n![](img/sevici1.JPG){fig-align=\"center\"}\n\n#### Descarga los datos e imp√≥rtalos en Google Sheets\n\nCrea una hoja de c√°lculo nueva y ponle un nombre. Luego, importa los datos del csv en una hoja que llamaremos `raw`.\n\nüîó [aparcabicicletas_sevici.csv](datos/aparcabicicletas_sevici.csv)\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nImporta el archivo desde: `Archivo > Importar > Subir > (Selecciona o arrastra tu archivo)`\n\n-   Ubicaci√≥n de importaci√≥n -\\> Remplazar la hoja actual\n\n-   Tipo de separador -\\> Detectar autom√°ticamente\n\n-   Convertir texto en n√∫mero, fechas y formas -\\> No\n:::\n\n#### Observa los datos y comprueba los encabezados\n\n1.  Crea un duplicado `trabajo` de la hoja `raw`.\n2.  Inmoviliza la primera fila para facilitar la visualizaci√≥n.\n3.  Revisa los nombres de las columnas para comprobar si describen el contenido. ¬øQu√© ocurre con la columna `LAYER`? ¬øC√≥mo lo solucionamos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nCrea una columna nueva al final de la tabla con el nombre `distrito`. Por ahora, vamos a trasladar la informaci√≥n creando una igualdad entre columnas `= B2`.\n\n\\***Consejo**: utiliza un color en el encabezado para identificar las columnas de tratamiento de las que contienen los datos originales.\n:::\n\n#### ¬øTienen todas las columnas el formato adecuado?\n\nEl siguiente paso es asegurarse de que las columnas tienen el formato adecuado: num√©rico, texto, fecha... Por ahora, vamos a ignorar las columnas de coordenadas. - ¬øQu√© les ocurre a las columnas `NUMERO` y `AROS`? ¬øSon correctos los valores en todas las columnas? - ¬øEs correcto el formato de `CreationDate` y `EditDate`?\n\n::: {.callout-tip collapse=\"true\" title=\"N√∫meros\"}\nA veces, las **columnas num√©ricas** se importan con un formato incorrecto. En este caso, aparece un ap√≥strofe oculto (') delante del n√∫mero. La forma m√°s f√°cil de resolver este problema es multiplicar los valores por 1.\n\nA√±ade dos nuevas columnas y aplica la operaci√≥n `=C2*1` y `=D2*1`.\n\nPara revisar que la operaci√≥n se ha aplicado correctamente en todas las columnas, podemos ordenarla de menor a mayor. As√≠, los errores quedar√°n al final.\n\n-   Si colocas el rat√≥n en el lado derecho de la letra que identifica la columna `numero`, aparecer√° una flecha. Al pinchar, se despliega un men√∫ en el que podemos elegir entre `Ordenar hoja A a la Z` y `Ordenar hoja Z a la A`. Cuando la columna es num√©rica, esto equivale a de menor a mayor y de mayor a menor. Selecciona la primera opci√≥n, ver√°s que el orden de esa columna reordena todas las filas.\n\n-   Observa que el orden de los n√∫meros es correlativo (1, 2, 3, 4...). Esto nos indica que el campo `numero` no es en realidad una cantidad, sino un recuento.\n\n-   Sabiendo esto, podemos corregir los 17 errores finales, marcado con el c√≥digo `#VALUE!`, sustituyendo la multiplicaci√≥n por una igualdad entre columnas que traslade la informaci√≥n de original de `NUMERO` a nuestra columna de trabajo `numero`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Fechas\"}\nLas fechas de creaci√≥n y edici√≥n aparecen en formato DD/M/YYYY HH:MM:SS. Vamos a separar la fecha y la hora usando la funci√≥n `SPLIT()`.\n\n-   En una columna nueva, escribe `=SPLIT(F2;\" \")`. Esto nos dar√° como resultado tres columnas adicionales: `fecha_creacion`, `hora_creacion` y `am_pm_creacion`.\n\n-   Repite el ejercicio para obtener `fecha_edicion`, `hora_edicion` y `am_pm_edicion`.\n\nTen en cuenta que, para consolidar los datos y asignarles un formato de fecha, debes copiar y pegar los valores sin f√≥rmulas.\n\nPara ello, copia las seis columnas con `CTR. + C` y p√©galas en el mismo lugar con `CTR. + SHIFT + C`. Despu√©s, aseg√∫rate de que las columnas `fecha_creacion` y `fecha_edicion` tienen formato fecha: selecciona `Formato > N√∫mero > Fecha`.\n:::\n\n#### ¬øCu√°ntos aparcabicis hay en la ciudad de Sevilla?\n\nComo la numeraci√≥n se interrumpe en el 619 y sabemos que la columna `numero` indica un recuento, podr√≠amos hacer la cuenta manualmente: `619 + 17 = 636`.\n\nSin embargo, es m√°s recomendable usar los recuentos autom√°ticos de Google Sheets para responder a esta pregunta y evitar errores.\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo usar el tecuento autom√°tico?\"}\n1.  Coloca el selector en la primera celda debajo del encabezado de la columna `numero` y, con la tecla `SHIFT` presionada, pulsa la flecha hacia abajo en el teclado `‚Üì`. Esto seleccionar√° todas las celdas que est√©n rellenas de manera consecutiva en la direcci√≥n seleccionada.\n2.  Con esta selecci√≥n, ver√°s que aparece un recuadro verde en la esquina inferior izquierda de la ventana. Si lo despliegas, ver√°s un panel con recuentos y c√°lculos b√°sicos como este.\n\n![](img/panel_recuento_drive.png){fig-align=\"center\" width=\"30%\"}\n:::\n\n> ¬øA qu√© se debe la diferencia entre nuestra cuenta manual y el recuento de Google?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nSi observas el n√∫mero de filas de la tabla, ver√°s que coincide con el recuento autom√°tico. (Ten en cuenta que no debes sumar el encabezado). Al revisar los n√∫meros que cre√≠amos ordenados, vemos que hay saltos: por ejemplo, del 133 al 135. Esto nos indica que nuestros 17 errores num√©ricos ocupan un lugar concreto en el listado.\n:::\n\n#### ¬øCu√°ntos aros para bicicletas hay en Sevilla?\n\nRepite los c√°lculos autom√°ticos de Google Sheets sobre la columna `aros` para obtener la suma total de aros.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  Coloca el selector en la primera celda debajo del encabezado de la columna `aros` y, con la tecla `SHIFT` presionada, pulsa la flecha hacia abajo en el teclado `‚Üì`. Esto seleccionar√° todas las celdas que est√©n rellenas de manera consecutiva en la direcci√≥n seleccionada.\n2.  Con esta selecci√≥n, ver√°s que aparece un recuadro verde en la esquina inferior izquierda de la ventana. Si lo despliegas, ver√°s un panel con recuentos y c√°lculos b√°sicos como este.\n\nEn Sevilla hay 3.073 aros para aparcar bicicletas.\n:::\n\n#### ¬øCu√°l es el aparcabicis con m√°s aros de Sevilla? ¬øY los que menos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nReordena la columna `aros` de mayor a menor. Coloca el rat√≥n en el lado derecho de la letra que identifica la columna que quieres ordenar y elige `Ordenar hoja Z a la A` en el desplegable.\n\n-   El aparcabicis con m√°s aros es el que tiene la ID 534. Est√° en el distrito ESTE y tiene 41 aros.\n\nRepite el ejercicio seleccionando `Ordenar hoja A a la Z` o navega hasta el final de la tabla sin reordenar.\n\n-   Los dos con menos aros son el 109 del distrito SUR y el 72 del distrito de MACARENA.\n:::\n\n## üßÆ Tablas din√°micas: entrevista a los datos\n\nUna tabla din√°mica (pivot table) es una [**tabla-resumen**]{.hl-yellow} que agrupa datos procedentes de otra tabla o base de datos de mayor tama√±o.\n\nMuestra los datos [**resumidos y ordenados**]{.hl-yellow} de forma efectiva y comprensible.\n\nLas tablas din√°micas son capaces de [**clasificar, contar, totalizar o dar la media**]{.hl-yellow} de forma autom√°tica.\n\n![](img/crear_tabla_dinamica.gif){fig-align=\"center\"}\n\n### üö≤ Caso pr√°ctico. Estaciones Sevici (II)\n\n#### Crea una tabla din√°mica para saber cu√°ntos aparcabicis hay en cada distrito de Sevilla\n\n> ¬øQu√© debes a√±adir a los campos `Filas`, `Columnas`, `Valores` y `Filtros` para responder obtener un resultado?\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo crear una tabla din√°mica?\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 1`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 1` como `aparcabicis_distrito` para poder identificarla en el futuro.\n\nSi por cualquier motivo cierras este panel, siempre puedes volverlo a abrir en el icono del lapicero que aparece bajo la tabla din√°mica.\n\n1.  A√±ade la columna `distrito` como `Filas`\n\n2.  A√±ade la columna `numero` como `Valores` y selecciona `Sumar por` \\> `COUNTA` para contar todos los registros que no est√°n en blanco.\n\n3.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as, a√±ade cualquier columna al campo `Filtros` y desmarca la opci√≥n `(Vac√≠o)`.\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `COUNTA de numero` en las opciones de `Filas`.\n\n**CASCO_ANTIGUO** es el distrito con mayor n√∫mero absoluto de aparcabicis: 132\n:::\n\n#### ¬øCu√°ntos aros para aparcar bicicletas hay en cada distrito de Sevilla?\n\nRepite el ejercicio anterior usando la columna `aros` como `Valores`. Ten en cuenta que, en este caso, no queremos hacer un recuento sino sumar las cantidades.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 2`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 2` como `aros_distrito` para poder identificarla en el futuro.\n\nSi por cualquier motivo cierras este panel, siempre puedes volverlo a abrir en el icono del lapicero que aparece bajo la tabla din√°mica.\n\n1.  A√±ade la columna `distrito` como `Filas`\n\n2.  A√±ade la columna `aros` como `Valores` y selecciona `Sumar por` \\> `SUM` para contar todos los registros que no est√°n en blanco.\n\n3.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as, a√±ade cualquier columna al campo `Filtros` y desmarca la opci√≥n `(Vac√≠o)`.\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `SUM de aros` en las opciones de `Filas`.\n\n**CASCO_ANTIGUO** tambi√©n es el distrito con m√°s aros para aparcar bicicletas de Sevilla: 747\n:::\n\n#### ¬øEs posible saber cu√°ntos aros por aparcabici hay en cada distrito? ¬øCu√°l es el distrito con m√°s aros por aparcabici?\n\nTen en cuenta que una tabla din√°mica puede tener m√°s de un elemento en cada uno de sus campos, incluido el campo `Valores`.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara responder a esta pregunta, duplica la hoja `aparcabicis_distrito` para conservar esta tabla din√°mica y renombra la nueva hoja como `aros_aparcabicis_distrito`.\n\n1.  Abre el panel `Editor de tablas din√°micas` con el icono del lapicero que aparece debajo de la tabla.\n\n2.  A√±ade la columna `aros` como `Valores` y selecciona `Sumar por` \\> `COUNTA` para obtener el recuento de todos los campos rellenos.\n\n3.  En una columna contigua, que llamaremos `aros_distrito`, puedes dividir el n√∫mero de aros entre el total de aparcabicis de cada distrito: `=C2/B2`.\n\n**OJO**: esta operaci√≥n est√° fuera de la tabla din√°mica, por lo que, si seguimos trabajando, tendremos que hacerlo con cuidado de no romper la f√≥rmula. Para recordarlo, pondremos el encabezado en un color distinto al azul.\n\n4.  Si quieres reducir el n√∫mero de decimales, puedes hacerlo seleccionando toda la columna y usar los atajos de `Reducir/Aumentar decimales` de la barra de herramientas.\n\n**CUIDADO**: como la operaci√≥n est√° fuera de la tabla din√°mica, no podemos reordenar la tabla. Una forma de ver cu√°l es el valor m√°s alto es aplicar un formato condicional a la columna `aros_distrito` desde `Formato > Formato condicional`m eligiendo `Escala de colores` en el panel de `Reglas de formato condicional`.\n\nEn Sevilla hay una tasa de 5,48 aros por cada aparcabicis. **ESTE** es el distrito con la tasa m√°s alta, con 8,02 aros por cada estaci√≥n.\n:::\n\n## üìä Datawrapper\n\n### ¬øQu√© es Datawrapper?\n\nDatawrapper es una herramienta online que permite crear tres tipos de visualizaciones:\n\n-   **Gr√°ficos**: desde barras, columnas o l√≠neas a gr√°ficos de flechas, diagramas de dispersi√≥n (scatterplots), pir√°mides de poblaci√≥n, etc.\n\n-   **Mapas**: de coropletas, de s√≠mbolos y localizadores.\n\n-   **Tablas**: en las que se pueden incluir mini gr√°ficos de l√≠neas y barras o im√°genes.\n\n![](img/datawrapper_options.png){fig-align=\"center\"}\n\nPara usar Datawrapper debes tener registrarte con un correo electr√≥nico y una contrase√±a.\n\nüîó [Ir al formulario de registro](https://app.datawrapper.de/signin)\n\n### üö≤ Caso pr√°ctico. Estaciones Sevici (III)\n\n![](img/sevici2.JPG){fig-align=\"center\"}\n\n#### Haz un gr√°fico que muestre cu√°l es el distrito de Sevilla con mayor n√∫mero de aparcabicis\n\nüìä Usa los datos de la tabla `aros_aparcabicis_distrito` y crea un `gr√°fico de barras` que est√© ordenado.\n\n::: {.callout-warning title=\"¬°Cuidado!\"}\nTen en cuenta que **no debes incluir la suma total de aparcabicis en tu gr√°fico**, ya que eso distorsionar√° la escala de las barras.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Gr√°fico de barras en Datawrapper\"}\nPara crear nuestro primer gr√°fico en Datawrapper vamos a elegir la opci√≥n `Crear nuevo...` \\> `Gr√°fico`.\n\n**Paso 1. Cargar datos**\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTR. + C` con cuidado de no seleccionar la fila `Suma total`.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTR. + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos el tipo de gr√°fico que vamos a usar y donde aplicamos los estilos.\n\n-   Por defecto, Datawrapper intenta encajar nuestros datos siempre en un gr√°fico de l√≠neas. Elige la opci√≥n `Gr√°fico de barras` en `Tipo de gr√°fico` y avanza a la pesta√±a `Mejorar`.\n\n-   Selecciona la columna que contiene los datos que quieres representar en el primer desplegable si no han aparecido por defecto.\n\n-   Si las barras no aparecen ordenadas, puedes forzar el orden en el apartado `Clasificaci√≥n y agrupaci√≥n` \\> `Organizar barras` del panel `Mejorar`.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"N√∫mero de aparcabicis Sevici en cada distrito de Sevilla\".\n\n-   Indica la fuente de tus datos, \"Portal de datos abiertos del Ayuntamiento de Sevilla\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n> ¬øQu√© pasa con los nombres de los distritos? ¬øC√≥mo lo solucionamos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara limpiar los nombres de los distritos, puedes reasignarle un nombre a cada uno desde el apartado `Visualizar` de Datawrapper. Basta con hacer doble clic sobre cada nombre en el gr√°fico y escribir el nombre adecuado.\n:::\n\n#### Aros por distrito y tasa de aros por aparcabici\n\nRepite el ejercicio anterior para hacer un gr√°fico de barras con el n√∫mero de aros por distrito y otro con la tasa de aros por aparcabici en cada distrito.\n\n> ¬øQu√© diferencias observas entre ambos gr√°ficos? ¬øCu√°l crees que es mejor para hacer un an√°lisis? ¬øPor qu√©?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEl **Casco antiguo** pasa del primer al tercer lugar al observar una tasa. **Este** y **Los Remedios** muestran tasas menores, mientras que **Cerro Amate** aparece como el distrito con menos aros para bicicletas en t√©rminos absolutos.\n\nLa tasa nos indica que, aunque en el *Casco antiguo* hay m√°s aparcabicis y aros, los vecinos de **Este** y **Los Remedios** encontrar√°n con m√°s facilidad, a priori, un espacio para aparcar su bicicleta p√∫blica si deciden utilizarla.\n\n*SPOILER*: m√°s adelante veremos que esta tasa no es la mejor para analizar la implantaci√≥n de aparcabicis en Sevilla.\n:::\n\n## üß† Tu turno (I)\n\n### üå≥ √Årboles en Sevilla\n\nA partir de los datos de los √°rboles que hay en los parques, calles y jardines de la ciudad de Sevilla, obtenidos en el portal de datos abiertos del Ayuntamiento, responde a las siguientes preguntas:\n\n#### Descarga los datos e imp√≥rtalos en Google Sheets\n\nCrea una hoja de c√°lculo nueva y ponle un nombre. Luego, importa los datos del csv en una hoja que llamaremos `raw`.\n\nüîó [inventario_arboles_sevilla.csv](datos/inventario_arboles_sevilla.csv)\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nImporta el archivo desde: `Archivo > Importar > Subir > (Selecciona o arrastra tu archivo)`\n\n-   Ubicaci√≥n de importaci√≥n -\\> Remplazar la hoja actual\n\n-   Tipo de separador -\\> Detectar autom√°ticamente\n\n-   Convertir texto en n√∫mero, fechas y formas -\\> No\n:::\n\n#### Observa los datos y comprueba los encabezados\n\n1.  ¬øQu√© ocurre al intentar crea un duplicado `trabajo` de la hoja `raw`? ¬øQu√© se puede hacer?\n\n::: {.callout-note collapse=\"true\" title=\"Que no punda el c√°nico\"}\n![](img/panicking.gif){fig-align=\"center\" width=\"25%\"}\n\nAl intentar duplicar la hoja, ver√°s un mensaje como este: \"Ha ocurrido un problema. Esta acci√≥n aumentar√° el n√∫mero de celdas del libro por encima del l√≠mite de 10.000.000 celdas\".\n\nTenemos que trabajar desde la hoja RAW, con cuidado de no sobrepasar ese l√≠mite.\n\n**Importante**: conserva el documento .csv a buen recaudo por si tienes que volver sobre tus pasos.\n:::\n\n2.  Inmoviliza la primera fila para facilitar la visualizaci√≥n.\n3.  Revisa los nombres de las columnas para comprobar si describen el contenido.\n\n#### ¬øTienen todas las columnas el formato adecuado?\n\nEl siguiente paso es asegurarse de que las columnas tienen el formato adecuado: num√©rico, texto, fecha... Tambi√©n hay que revisar si est√°n completas. Por ahora, vamos a ignorar las columnas de coordenadas.\n\n> ¬øEs correcto el formato de `ALTURA` y `PERIMETRO`? ¬øQu√© tenemos que hacer?\n\n::: {.callout-tip collapse=\"true\" title=\"N√∫meros\"}\nA veces, las **columnas num√©ricas** se importan con un formato incorrecto. En este caso, aparece un ap√≥strofe oculto (') delante del n√∫mero. La forma m√°s f√°cil de resolver este problema es multiplicar los valores por 1.\n\nA√±ade dos nuevas columnas y aplica la operaci√≥n `=J2*1` y `=K2*1`.\n\nPara revisar que la operaci√≥n se ha aplicado correctamente en todas las columnas, podemos ordenarla de menor a mayor. As√≠, los errores quedar√°n al final.\n\n-   Si colocas el rat√≥n en el lado derecho de la letra que identifica la columna, aparecer√° una flecha. Al pinchar, se despliega un men√∫ en el que podemos elegir entre `Ordenar hoja A a la Z` y `Ordenar hoja Z a la A`. Cuando la columna es num√©rica, esto equivale a de menor a mayor y de mayor a menor. Selecciona la primera opci√≥n, ver√°s que el orden de esa columna reordena todas las filas.\n:::\n\n> ¬øQu√© les ocurre a las columnas `CODIGO`, y `FASE_EDAD`?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEstas columnas mezclan valores num√©ricos y texto. Sin un diccionario o glosario que explique el significado de esos c√≥digos, no podemos trabajar con ellas.\n:::\n\n> ¬øQu√© les ocurre a las columnas `DISTRITO`, `BARRIO`, `U__GESTION`, `ESPECIE`, `TIPOLOGIA`, `TIPO_MARRA` y `Comprobar`? ¬øC√≥mo lo solucionamos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nLas columnas mencionadas tienen celdas en blanco. Esto indica que la informaci√≥n para estos campos no est√° disponible o se desconoce en algunos casos.\n\nComo despu√©s usaremos esas columnas en tablas din√°micas, podemos completar los espacios vac√≠os con el t√©rmino que mejor se adapte a cada campo: `Desconocido`, `Sin informaci√≥n`, `Otros`...\n\nUsa `Datos > Crear un filtro` para mostrar todas las celdas vac√≠as en cada columna y rellenar los huecos.\n\nRecuerda poner en un color distinto el encabezado para saber qu√© hemos hecho modificaciones sobre los datos originales.\n:::\n\n> La soluci√≥n anterior no se puede aplicar a la columna `PLANTACION` ¬øPor qu√©? ¬øQu√© podemos hacer?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nLa columna `PLANTACION` muestra el a√±o de plantaci√≥n, que es un dato num√©rico. Al tratarse de una fecha o marca temporal, no es recomendable completarlo con texto, ya que eso impedir√≠a realizar operaciones o c√°lculos m√°s adelante.\n\nEn este caso, podemos hacer dos cosas:\n\n-   Dejar las celdas vac√≠as, aunque esto nos obligar√° a recordar que esas celdas no tienen informaci√≥n.\n\n-   Rellenar las celdas con un a√±o que est√© claramente fuera del rango. Esto nos permitir√° filtrar los datos para no tener en cuenta los campos desconocidos en nuestros c√°lculos, sin perder el formato.\n\nRecuerda que, adem√°s, debes resolver el formato num√©rico como has hecho en `ALTURA` y `PERIMETRO`.\n:::\n\n#### ¬øCu√°ntos √°rboles hay en la ciudad de Sevilla? ¬øCu√°l es su altura media? ¬øY su per√≠metro medio?\n\nUtiliza los recuentos autom√°ticos de Google Sheets para responder a esta pregunta y evitar errores.\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo usar el tecuento autom√°tico?\"}\n1.  Coloca el selector en la primera celda debajo del encabezado de la columna `altura` y, con la tecla `SHIFT` presionada, pulsa la flecha hacia abajo en el teclado `‚Üì`. Esto seleccionar√° todas las celdas que est√©n rellenas de manera consecutiva en la direcci√≥n seleccionada.\n\n2.  Con esta selecci√≥n, ver√°s que aparece un recuadro verde en la esquina inferior izquierda de la ventana. Si lo despliegas, ver√°s un panel con recuentos y c√°lculos b√°sicos en el que podr√°s consultar el recuento de filas de la tabla.\n\nRepite el ejercicio en la columna `per√≠metro`\n:::\n\n#### ¬øD√≥nde est√° el √°rbol m√°s alto de Sevilla? ¬øDe qu√© especie es? ¬øCu√°nto mide? ¬øEn qu√© a√±o se plant√≥ y qui√©n lo gestiona? ¬øPodr√≠a ser el foco para un reportaje local?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nReordena la columna `altura` de mayor a menor. Coloca el rat√≥n en el lado derecho de la letra que identifica la columna que quieres ordenar y elige `Ordenar hoja Z a la A` en el desplegable.\n\n-   El √°rbol m√°s alto de Sevilla est√° en el barrio de Palmete, del distrito de Cerro - Amate. Es un brachychiton populneus. Se desconoce su a√±o de plantaci√≥n y est√° gestionado por Z.V. Parterres C/Afecto-Indulgencia.\n:::\n\n#### Analiza los √°rboles de Sevilla por barrios usando tablas din√°micas\n\n> ¬øCu√°l es el barrio con m√°s √°rboles de Sevilla? ¬øY el que tiene menos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 1`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 1` como `barrios` para poder identificarla en el futuro.\n\nSi por cualquier motivo cierras este panel, siempre puedes volverlo a abrir en el icono del lapicero que aparece bajo la tabla din√°mica.\n\n1.  A√±ade la columna `BARRIO` como `Filas`\n\n2.  A√±ade la columna `OBJECTID` como `Valores` y selecciona `Sumar por` \\> `COUNTA` para contar todos los registros que no est√°n en blanco.\n\n3.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as, a√±ade cualquier columna al campo `Filtros` y desmarca la opci√≥n `(Vac√≠o)`.\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `COUNTA de OBJECTID` en las opciones de `Filas`.\n\n**Colores, Entreparques** es el barrio con mayor n√∫mero absoluto de √°rboles: 16.929. **Arbol Gordo** es el que menos √°rboles tiene. Solo 36.\n:::\n\n> ¬øEn qu√© distritos est√°n estos barrios? ¬øSon los distritos con m√°s √°rboles?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nRecuerda que puedes a√±adir m√°s de una columna en los campos de la tabla din√°mica.\n\nPara responder a esta pregunta, a√±ade la columna `DISTRITO` como `Filas`.\n\nüéâ **¬°SORPRESA!** Esto tambi√©n sirve para conocer el total de √°rboles de cada distrito\n\nPara responder a la segunda pregunta, tienes que ordenar tambi√©n los distritos. Selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `COUNTA de OBJECTID` en las opciones de `Filas` de `DISTRITO`.\n\n**Colores, Entreparques** es el barrio con m√°s √°rboles y est√° en el distrito con m√°s arbolado de Sevilla: \\*\\*Este - Alcosa - Torreblanca\\*.\n\n**Arbol Gordo** es el barrio con menos √°rboles. Pero el distrito del que forma parte, **San Pablo - Santa Justa**, no es el que menos arbolado acumula. Macarena, Nervi√≥n, Casco Antiguo y Los Remedios tienen menos.\n\nEsto podr√≠a dar para un reportaje sobre el acceso a zonas verdes en la ciudad, ¬øverdad?\n:::\n\n> üìä Haz un gr√°fico de barras en Datawrapper donde cada barra sea un barrio y √©stas est√©n ordenadas y agrupadas por distrito\n\n::: {.callout-note title=\"Pista\"}\nRevisa las opciones de `Clasificaci√≥n y agrupaci√≥n` en el panel `Mejorar` para hacer los grupos.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n**0. Prepara los datos**\n\nAntes de llevar los datos a Datawrapper, hay que hacer algunos ajustes en la tabla din√°mica de la hoja `barrios`.\n\n-   En el apartado `Filas`, desmarca la opci√≥n `Mostrar totales` para las columnas `DISTRITO` y `BARRIO`. Esto oculta los totales de la tabla que pueden distorsionar nuestra visualizaci√≥n si los llevamos al gr√°fico.\n\n-   En `Filas` \\> `DISTRITO`, activa la opci√≥n `Repetir las etiquetas de las filas`. As√≠, el nombre de cada distrito se repetir√° tantas veces como barrios contenga.\n\n-   A√±ade la columna `BARRIOS` a `Filtros` y desmarca `(Vac√≠o)` y `Desconocido` para no llevar al gr√°fico ni los valores desconocidos ni los campos vac√≠os.\n\n**Paso 1. Cargar datos**\n\n-   Selecciona `Crear nuevo... > Gr√°fico`\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTRL + C`.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTRL + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos el tipo de gr√°fico que vamos a usar y donde aplicamos los estilos.\n\n-   Por defecto, Datawrapper intenta encajar nuestros datos siempre en un gr√°fico de l√≠neas. Elige la opci√≥n `Gr√°fico de barras` en `Tipo de gr√°fico` y avanza a la pesta√±a `Mejorar`.\n\n-   Selecciona la columna que contiene los datos que quieres representar en el primer desplegable si no han aparecido por defecto.\n\n-   Si las barras no aparecen ordenadas, puedes forzar el orden en el apartado `Clasificaci√≥n y agrupaci√≥n` \\> `Organizar barras` del panel `Mejorar`.\n\n-   Para hacer los grupos, activa `Agrupar barras por columna` en la secci√≥n `Clasificaci√≥n y agrupaci√≥n` del panel `Mejorar`. Luego, elige la columna por la que quieres agrupar: `DISTRITO`.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"N√∫mero de √°rboles en cada barrio de Sevilla\".\n\n-   Indica la fuente de tus datos, \"Portal de datos abiertos del Ayuntamiento de Sevilla\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n#### ¬øEn qu√© a√±o se plantaron m√°s √°rboles en Sevilla desde 2013?\n\n> Crea una tabla din√°mica con la columna `plantacion` como `Filas` y la columna `OBJECTID` como `Valores`.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 1`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 1` como `plantacion` para poder identificarla en el futuro.\n\nSi por cualquier motivo cierras este panel, siempre puedes volverlo a abrir en el icono del lapicero que aparece bajo la tabla din√°mica.\n\n1.  A√±ade la columna `plantacion` como `Filas`\n\n2.  A√±ade la columna `OBJECTID` como `Valores` y selecciona `Sumar por` \\> `COUNTA` para contar todos los registros que no est√°n en blanco.\n\n3.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as y los √°rboles de los que se desconoce el a√±o de plantaci√≥n, a√±ade la columna `plantacion` al campo `Filtros` y desmarca las opciones `(Vac√≠o)` y la que hayas usado como a√±o fuera del rango 2013-2024.\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `COUNTA de OBJECTID` en las opciones de `Filas`.\n\n**2022** fue el a√±o en el que m√°s √°rboles se plantaron en Sevilla: **2.671**\n:::\n\n> üìä Haz un gr√°fico de l√≠neas en Datawrapper con estos datos\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n**0. Prepara los datos**\n\nComo para responder a la pregunta anterior hemos reordenado la tabla din√°mica `plantacion` de mayor a menor, tenemos que volver a ordenarla por a√±o.\n\n-   Elige `Orden` \\> `Ascendente` y `Ordenar por` \\> `Plantaci√≥n` en el apartado `Filas`.\n\n**Paso 1. Cargar datos**\n\n-   Selecciona `Crear nuevo... > Gr√°fico`\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTRL + C` con cuidado de no seleccionar la fila `Suma total`.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTRL + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos el tipo de gr√°fico que vamos a usar y donde aplicamos los estilos.\n\n-   Por defecto, Datawrapper intenta encajar nuestros datos siempre en un gr√°fico de l√≠neas, por lo que no tendremos que seleccionar otra opci√≥n en `Tipo de gr√°fico`. Avanza a la pesta√±a `Mejorar`.\n\n-   El `Eje horizontal` tiene que ser una fecha o un a√±o. En nuestro caso, eso se encuentra en la columna `plantacion`, que debe estar ordenada.\n\n-   El `Eje vertical` mostrar√° tantas l√≠neas como columnas tenga nuestra table. En este caso, solo hay una: `COUNTA de OBJECTID`.\n\n-   En el resto de opciones de customizaci√≥n puedes cambiar el color o el estilo de la l√≠nea. Pero presta atenci√≥n al apartado `Descripciones emergentes` del panel `Mejorar`. Aqu√≠ podemos elegir c√≥mo se mostrar√° la informaci√≥n del tooltip. Como estamos trabajando con a√±os, selecciona `2015, 2016` en `Fechas (horizontal axis)`. La secci√≥n `Valores (vertical axis)` puede quedarse como est√° por defecto, ya que nuestros datos no tienen decimales.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"N√∫mero de √°rboles plantados en Sevilla cada a√±o\".\n\n-   Indica la fuente de tus datos, \"Portal de datos abiertos del Ayuntamiento de Sevilla\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n> ¬øTe has fijado en que el nombre de la l√≠nea aparece como `COUNTA de OBJECTID`? Esto parece poco legible y est√©tico para el gr√°fico. ¬øC√≥mo lo solucionamos?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nAl tratarse de un gr√°fico con una sola l√≠nea, puede arreglarse de dos formas.\n\n1.  **Cambiando el nombre de la columna** en el apartado `Verificar y describir`. Por ejemplo, por `N¬∫ √°rboles`.\n\n2.  **Mostrando el √∫ltimo dato de la curva**. Esto puede activarse en el panel `Mejorar` del apartado `Visualizar`. En `Customize line` activa `Etiqueta` \\> `Nada` y `Mostrar etiquetas de valor`. Luego, desactiva `Primera` en `Final de la l√≠nea`.\n:::\n\n> ¬øC√≥mo puedo destacar el valor m√°s alto de la curva?\n\n::: {.callout-note title=\"Pista\"}\nRevisa las opciones del panel `Anotar` en la secci√≥n `Visualizar` de tu gr√°fico.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"A√±adir anotaciones\"}\nLa mayor√≠a de los gr√°ficos de Datawrapper permiten a√±adir anotaciones sobre el gr√°fico. Encontrar√°s esta opci√≥n en `Visualizar` \\> `Anotar` \\> `Anotaciones de texto` \\> `A√±adir anotaci√≥n de texto`.\n:::\n\n#### ¬øCu√°l es la especie m√°s com√∫n en el arbolado de Sevilla? ¬øCu√°ntas especies tienen un solo ejemplar en la ciudad?\n\n> Crea una tabla din√°mica con la columna `ESPECIE` como `Filas` y la columna `OBJECTID` como `Valores`.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 1`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 1` como `especie` para poder identificarla en el futuro.\n\nSi por cualquier motivo cierras este panel, siempre puedes volverlo a abrir en el icono del lapicero que aparece bajo la tabla din√°mica.\n\n1.  A√±ade la columna `plantacion` como `Filas`\n\n2.  A√±ade la columna `OBJECTID` como `Valores` y selecciona `Sumar por` \\> `COUNTA` para contar todos los registros que no est√°n en blanco.\n\n3.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as y los √°rboles de los que se desconoce el a√±o de plantaci√≥n, a√±ade cualquier columna al campo `Filtros` y desmarca la opci√≥n `(Vac√≠o)`.\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `COUNTA de OBJECTID` en las opciones de `Filas`.\n\nPara recontar las especies con un solo ejemplar, basta con recontar las filas con un √∫nico ejemplar en la tabla din√°mica.\n\nLa especie m√°s com√∫n en el arbolado de Sevilla es el **Citrus aurantium**, con 51.214 ejemplares. Hay **59** especies que solo tienen un ejemplar en la ciudad.\n:::\n\n> üìä Crea un gr√°fico de anillo con las cinco especies de √°rboles m√°s frecuentes en la ciudad de Sevilla y agrupa el resto una sexta categor√≠a llamada \"Otros\"\n\n::: {.callout-note title=\"Pista\"}\nDatawrapper permite definir los grupos sin necesidad de modificar los datos de la tabla din√°mica en la secci√≥n `Agrupaci√≥n` del panel `Mejorar`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n**Paso 1. Cargar datos**\n\n-   Selecciona `Crear nuevo... > Gr√°fico`\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTRL + C`. Ten cuidado de no copiar la suma total, porque eso distorsionar√≠a el gr√°fico.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTRL + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos el tipo de gr√°fico que vamos a usar y donde aplicamos los estilos.\n\n-   Por defecto, Datawrapper intenta encajar nuestros datos siempre en un gr√°fico de l√≠neas. Elige la opci√≥n `Gr√°fico de anillo` en `Tipo de gr√°fico` y avanza a la pesta√±a `Mejorar`.\n\n-   En `Fragmentos del anillo`, selecciona la columna que contiene los datos que quieres representar si no ha aparecido por defecto.\n\n-   Mant√©n la opci√≥n `Ordenar por` \\> `De mayor a menor` para que el gr√°fico se ordene en el sentido de las agujas del reloj.\n\n-   En `Color del fragmento` puedes personalizar los colores del gr√°fico. Si los grupos son partes de un todo, es recomendable ir de tonos m√°s oscuros a m√°s claros de un mismo color.\n\n-   Escribe el `N√∫mero m√°ximo de fragmentos` que va a tener el gr√°fico en el apartado `Agrupaci√≥n`.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"Especies de √°rbol m√°s comunes en la ciudad de Sevilla\".\n\n-   Indica la fuente de tus datos, \"Portal de datos abiertos del Ayuntamiento de Sevilla\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n## üî¢ Tasas y valores relativos (I)\n\nUna tasa expresa la **relaci√≥n entre dos magnitudes**.\n\nAlgunas tasas comunes son: *porcentaje respecto al total*, *porcentaje respecto al PIB* o *tasa por poblaci√≥n*.\n\n![](img/calculos.webp){fig-align=\"center\" width=\"83%\"}\n\n### üö≤ Caso pr√°ctico. Estaciones Sevici (IV)\n\n#### Calcula el porcentaje de aparcabicis en cada distrito de Sevilla\n\n> Las tablas din√°micas permiten hacer algunos c√°lculos b√°sicos sobre los datos que contienen con la opci√≥n `Campo calculado`\n\n::: {.callout-tip collapse=\"true\" title=\"Incluir f√≥rmulas en una tabla din√°mica\"}\n1.  Abre el `Editor de tablas din√°micas` en tu hoja `aparcabicis_distrito`.\n\n2.  En el apartado `Valores`, selecciona `A√±adir > Campo calculado`.\n\n3.  Crea la f√≥rmula del porcentaje en el apartado `F√≥rmula`. En este caso, vamos a dividir el recuento de cada distrito, `CONTARA(NUMERO)`, entre el total de aparcabicis, `561`, y lo multiplicaremos todo por 100 (`*100`) para convertirlo en porcentaje `=(CONTARA(NUMERO)/561)*100`.\n\n4.  Selecciona la opci√≥n `Personalizado` en el apartado `Sumar por`.\n\n5.  Renombra el `Campo calculado` como `por_aparcabicis` haciendo doble clic en el encabezado de la columna de la tabla din√°mica.\n:::\n\n> Revisa las opciones de `Mostrar como` en el `Campo calculado`. ¬øSe te ocurre alguna forma m√°s simple de calcular el porcentaje?\n\n::: {.callout-tip collapse=\"true\" title=\"Calcular porcentajes en una tabla din√°mica\"}\nEl apartado `Mostrar como` nos permite expresar un valor absoluto de distintas formas relativas respecto a los valores de la tabla din√°mica:\n\n-   `Predeterminado` muestra el resultado de la f√≥rmula que hayamos aplicado\n\n-   `Porcentaje de la fila` toma el resultado de la f√≥rmula y lo expresa como porcentaje respecto a la fila en la que se encuentra (en horizontal)\n\n-   `Porcentaje de la columna` toma el resultado de la f√≥rmula y lo expresa como porcentaje respecto a todos los elementos de la columna calculada (en vertical)\n\n-   `Porcentaje de la suma total` toma el resultado de la f√≥rmula y lo divide entre la suma total de la columna. Luego lo multiplica por 100 para obtener un porcentaje.\n\nEn este caso, nos interesa dividir cada recuento por la suma total, por lo que podemos aplicar `Porcentaje de la suma total`.\n:::\n\n> üìä Traslada los porcentajes a un gr√°fico de barras. ¬øEs la opci√≥n m√°s adecuada?\n\n::: {.callout-nota title=\"Consejo\"}\nDatawrapper permite duplicar gr√°ficos para generar nuevas visualizaciones conservando los estilos y anotaciones de la anterior.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Duplicar un gr√°fico en Datawrapper\"}\n**Paso 0. Duplica el gr√°fico**\n\nLocaliza tu gr√°fico de barras con los aparcabicis por distrito en Datawrapper y selecci√≥nalo. Se abrir√° una vista previa del gr√°fico similar a esta:\n\n![](img/vista_previa_chart.png){fig-align=\"center\" width=\"70%\"}\n\nEn la parte derecha ver√°s el bot√≥n `Duplicar`. Al pulsarlo, se abrir√° un nuevo gr√°fico con la palabra \"(Copia)\" en el t√≠tulo.\n\nSelecciona el paso 1 `Cargar datos` para modificar los datos del gr√°fico.\n\n**Paso 1. Cargar datos**\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTRL + C` con cuidado de no seleccionar la fila `Suma total`.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTRL + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   üëÄ **OJO**. ¬øRecuerdas que modificamos los nombres de los distritos a mano en este gr√°fico? Como estamos trabajando con un gr√°fico duplicado, ver√°s que las celdas de la columna `distrito` aparecen marcadas con un tri√°ngulo amarillo. Esto indica que el contenido de la celda ha sido modificado respecto al dato original.\n\n-   Para evitar trasladar errores de un gr√°fico a otro, pulsa el bot√≥n `Revertir cambios...` en la esquina inferior derecha de la pantalla.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\n-   Como ahora nuestra fuente de datos tiene dos columnas (`COUNTA de numero` y `por_aparcabicis`), Datawrapper selecciona por defecto la primera. Para mostrar los porcentajes, debes cambiarlo en el desplegable `Barras > Seleccionar columna` del panel `Mejorar`\n\n-   Ver√°s que los n√∫meros aparecen sin el s√≠mbolo del tanto por ciento. Para solucionarlo, elige `0.[0]%` en el desplegable `Formato num√©rico` del apartado `Etiquetas`. El n√∫mero de ceros entre corchetes representa el n√∫mero de decimales que se muestran al redondear.\n\n-   Si las barras no aparecen ordenadas, puedes forzar el orden en el apartado `Clasificaci√≥n y agrupaci√≥n` \\> `Organizar barras` del panel `Mejorar`.\n\n-   En la pesta√±a anotar, modifica el t√≠tulo del gr√°fico para eliminar la indicaci√≥n de que es un duplicado. Por ejemplo, \"Porcentaje de aparcabicis Sevici en cada distrito de Sevilla\".\n\n-   Como es un duplicado, ver√°s que los campos `Fuente de datos` y `Producido por` ya est√°n rellenos y, en este caso, no hace falta cambiarlos.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n> Observa el gr√°fico que acabas de hacer. ¬øEs la mejor elecci√≥n para este tipo de dato? ¬øPor qu√©?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nCuando **los datos forman parte de un todo**, el gr√°fico debe expresar esa circunstancia.\n\nVuelve al panel `Tipo de gr√°fico` y elige alguna de las siguientes opciones:\n\n-   **Gr√°fico de c√≠rculo** o **gr√°fico de anillo**. Esta es la modificaci√≥n m√°s simple. Basta con seleccionar la columna adecuada en `Mejorar` \\> `Fragmentos del c√≠rculo` para obtener un buen resultado.\n\n-   **Columnas apiladas**. Para poder usar este gr√°fico, tenemos que deshacernos de la columna `COUNTA de numero`. Ve a `Verificar y describir` selecciona la columna completa y marca `Ocultar columna de la visualizaci√≥n` en las opciones laterales.\n\n-   **Barras apiladas**. Para poder usar este gr√°fico hay que llevar al apartado `Cargar datos` una √∫nica columna, que puede ser simplemente el recuento en t√©rminos absolutos. Copia y pega las columnas `distrito` y `COUNTA de numero` desde tu tabla din√°mica. Luego, recupera esa columna para la visualizaci√≥n desmarcando la opci√≥n `Ocultar columna de la visualizaci√≥n` en `Verificar y describir` y pivota los datos con el bot√≥n `Intercambiar filas y columnas (transponer)` que aparece debajo de la tabla. Esto nos dar√° una √∫nica barra apilada con los valores absolutos, pero puedes convertirlos en porcentajes con la opci√≥n `Apilar porcentajes` en el apartado `Aspecto` del panel `Mejorar` en `Visualizar`. Recuerda cambiar el nombre de la columna `COUNTA de numero`, ya que ahora es visible en el gr√°fico.\n:::\n\n#### Incorpora el dato de poblaci√≥n a la hoja de trabajo\n\nDescarga el archivo `poblacion_distritos_sevilla.csv` e imp√≥rtalo en tu documento de trabajo de Google Drive. Luego, usa la funci√≥n `BUSCARV()` para unir las cifras de poblaci√≥n a la hoja `trabajo`.\n\nüîó [poblacion_distritos_sevilla.csv](datos/poblacion_distritos_sevilla.csv)\n\nLa funci√≥n `BUSCARV()` es una funci√≥n de **b√∫squeda y referencia**. Se usa para realizar la b√∫squeda vertical de un valor en la columna del extremo izquierdo de una tabla o selecci√≥n y devolver el valor en la misma fila. Estos son sus argumentos:\n\n-   `valor_b√∫squeda` -\\> Es el campo que vamos a buscar en la tabla. Puede ser un texto entre comillas, un n√∫mero o la referencia a una celda. Debe aparecer en la primera columna del intervalo.\n\n-   `intervalo` -\\> Es el rango de columnas en el que vamos a buscar nuesto valor de b√∫squeda. Puede estar en la misma hoja, en otra hoja del libro o, incluso, en otro hoja de c√°lculo.\n\n-   `√≠ndice` -\\> Indica la columna en la que est√°n los valores que queremos obtener en la b√∫squeda. Se expresa como un n√∫mero entero ordenado, contando desde la primera columna del intervalo.\n\n-   `est√°_ordenado` -\\> Indica si la primera columna en la que se va a buscar (la primera columna del intervalo especificado) est√° ordenada. Normalmente no ocurre, por lo que lo indicamos como `FALSE`.\n\n::: {.callout-tip collapse=\"true\" title=\"Crear diccionarios en Google Sheets\"}\n**Paso 1. Importa el nuevo dataset**\n\nCrea una nueva pesta√±a/hoja en tu documento y ponle el nombre `poblacion_distritos`. Importa en ella el CSV de poblaci√≥n que acabas de descargar.\n\n1.  Selecciona `Archivo > Importar > Subir > Examinar > Abrir`\n\n2.  En el cuadro de di√°logo `Importar archivo` elige las opciones adecuadas: `Ubicaci√≥n de importaci√≥n > Remplazar la hoja actual`, `Tipo de separador > Detectar autom√°ticamente` y `Convertir texto en n√∫meros, fechas y f√≥rmulas > No`.\n\n**Paso 2. Unir tablas con** `BUSCARV()`\n\nInmoviliza la primera fila y observa las columnas. Ver√°s que hay dos columnas de nombre de distrito: `distrito_raw`, que coincide con el nombre de los distritos en la hoja `trabajo` y `distrito_clean` que es un nombre limpio.\n\nAdem√°s, la columna `id` asigna un c√≥digo num√©rico a cada distrito. Y el dato que nos interesa est√° en la columna `poblacion`.\n\nPara unir las tablas, crea una columna nueva al final de la hoja `trabajo` y ll√°mala `pob_distrito`. Recuerda poner el encabezado en otro color para saber que es un campo a√±adido.\n\nEn esta columna es donde vamos a aplicar nuestra funci√≥n `BUSCARV()` cuya f√≥rmula se compone del elemento de la columna `LAYER` que quiero buscar, el intervalo de la hoja `poblacion_distritos` en el que voy a realizar la b√∫squeda, el √≠ndice o posici√≥n de la informaci√≥n que quiero recuperar, el dato de poblaci√≥n de la columna `poblacion` y la indicaci√≥n de que la primera columna del intervalo no est√° ordenada.\n\n`=BUSCARV(B2;poblacion_distritos!A:D;4;FALSO)`\n\nAplicando esta f√≥rmula en la primera celda `pob_distrito` y arrastrando hacia abajo, recuperaremos el valor de poblaci√≥n de cada distrito.\n:::\n\n#### Repite el ejercicio anterior para limpiar los nombres de los distritos en la columna `distrito`\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nAplica la funci√≥n `BUSCARV()` en la primera celda de la columna `distrito`, indicando como elemento a buscar el primer campo de `LAYER`, el intervalo de b√∫squeda `distrito_raw`:`poblacion` de la hoja `poblacion_distritos`, el √≠ndice o posici√≥n que ocupa `distrito_clean` y la indicaci√≥n `FALSE` de que la primera columna del intervalo no est√° ordenada.\n\n`=BUSCARV(B2;poblacion_distritos!A:D;2;FALSO)`\n\nObserva que, respecto al ejercicio anterior, solo hemos cambiado el √≠ndice, porque `distrito_clean` ocupa la posici√≥n 2 y `poblacion` es la cuarta columna de la hoja `poblacion_distritos`.\n:::\n\n#### ¬øCu√°l es la tasa de anillos aparcabici por 1.000 habitantes en cada distrito de Sevilla? ¬øQu√© diferencias encuentras?\n\nRecuerda que en `aros_aparcabici_distrito` calculamos la columna `aros_distrito` como la tasa de aros por aparcabici. Pero esta no es una buena medida para comparar los distritos entre s√≠.\n\n> Calcula la tasa usando `BUSCARV()` en `aros_aparcabicis_distrito`\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn `aros_aparcabicis_distrito` crea una nueva columna que se llame `pob_distrito` para traer a esta tabla la poblaci√≥n de cada distrito desde `poblacion_distritos`\n\nüëÄ **OJO**. Ahora, nuestra columna de referencia ya son los distritos limpios, por lo que el intervalo de b√∫squeda debe ser `distrito_clean`:`poblacion`. Esto tambi√©n cambiar√° el √≠ndice que ocupa el dato de poblaci√≥n.\n\n`=BUSCARV(A2;poblacion_distritos!B:D;3;FALSE)`\n\nA continuaci√≥n, crea la columna `aros_1000_hab` y escribe la f√≥rmula para calcular la tasa:\n\n(`SUM de aros` / `pob_distrito`)\\*1000\n\nCon esta soluci√≥n, tendr√°s que copiar los datos a una nueva hoja para reordenar las columnas por `aros_1000_hab` y poder sacar conclusiones.\n\nObserva que **Casco Antiguo** y **Nervi√≥n** siguen siendo los dos distritos que m√°s aros aparcabicis tienen, tanto en t√©rminos absolutos como en tasa por habitante. En cambio, **Los Remedios**, con tan solo 188 aros, tiene la tercera tasa m√°s alta: 7,39 aros por cada 1.000 vecinos.\n\nEst√° por encima de **Este - Alcosa - Torreblanca**, que pese a ser el distrito m√°s poblado, se conforma con una tasa de 3,54 aros por cada 1.000 habitantes.\n:::\n\n> Calcula la tasa usando la opci√≥n `Campo calculado` de la tabla din√°mica `aros_aparcabicis_distrito`\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara aplicar esta soluci√≥n, lo primero que debes hacer es renombrar la columna `aros` de la hoja `trabajo`, ya que los campos calculados no distinguen entre may√∫sculas y min√∫sculas, por lo que *no debe haber dos columnas con el mismo nombre*.\n\nüòµ‚Äçüí´ Este cambio no destruir√° tu trabajo previo, porque Google Sheets es listo y renombra la columna en todas partes.\n\nComo vamos a a√±adir una nueva columna a la tabla din√°mica, tenemos que hacer sitio para que crezca. Basta con a√±adir una nueva columna a la derecha de la √∫ltima columna de la tabla din√°mica en `aros_aparcabicis_distrito`\n\nAhora abre el editor de la tabla din√°mica y a√±ade un `Campo calculado` en `Valores`. Configura el campo `Sumar por` como `Personalizado` y `Mostrar como` como `Predeterminado`.\n\nCrea una f√≥rmula para calcular la tasa en el campo `F√≥rmula`. Tenemos que dividir la suma de aros de cada distrito entre la poblaci√≥n de ese distrito y multiplicar el resultado por 1.000. Para ello, usaremos las funciones `SUMA()` y `UNIQUE()`, ya que queremos usar el dato de poblaci√≥n una sola vez y no su agregado.\n\n`=(SUMA(aros_clean)/unique(pob_distrito))*1000`\n\nRecuerda que puedes renombrar la columna de campo calculado como `aros_1000_hab` haciendo doble clic en el encabezado.\n\nPara reordenar los datos de la tabla din√°mica y sacar conclusiones, basta con elegir `Orden > Descendente` y `Ordenar por > aros_1000_hab` en el apartado `Filas` del `Editor de tablas din√°micas`.\n\nObserva que **Casco Antiguo** y **Nervi√≥n** siguen siendo los dos distritos que m√°s aros aparcabicis tienen, tanto en t√©rminos absolutos como en tasa por habitante. En cambio, **Los Remedios**, con tan solo 188 aros, tiene la tercera tasa m√°s alta: 7,39 aros por cada 1.000 vecinos.\n\nEst√° por encima de **Este - Alcosa - Torreblanca**, que pese a ser el distrito m√°s poblado, se conforma con una tasa de 3,54 aros por cada 1.000 habitantes.\n:::\n\n> Las dos opciones son equivalentes y deber√≠an ofrecer el mismo resultado. Utiliza la que te resulte m√°s c√≥moda.\n\n## üß† Tu turno (II)\n\n### üòé Caso pr√°ctico. Pisos tur√≠sticos\n\n#### Descarga los datos\n\nDescarga los datos de viviendas tur√≠sticas y poblaci√≥n por provincias en Espa√±a procedentes de la web del INE. Vamos a analizar la presi√≥n de este tipo de alojamientos en cada comunidad aut√≥noma y provincia de Espa√±a.\n\nüîó [viviendas_turisticas_es_2024.csv](datos/viviendas_turisticas_es_2024.csv) üîó [poblacion_provincias_es.csv](datos/poblacion_provincias_es.csv)\n\n#### Importa los dos archivos CSV en una nueva hoja de c√°lculo y revisa que tengan los formatos correctos\n\nRecuerda que la hoja de datos originales debe llevar el nombre `raw` y el diccionario de poblaci√≥n puedes llamarlo `poblacion_provincias`.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  Importa los datos desde `Archivo > Importar > Subir > Examinar > Abrir`.\n\n2.  En el cuadro de di√°logo `Importar archivo` elige las opciones adecuadas: `Ubicaci√≥n de importaci√≥n > Remplazar la hoja actual`, `Tipo de separador > Detectar autom√°ticamente` y `Convertir texto en n√∫meros, fechas y f√≥rmulas > No`.\n\n3.  Renombra la hoja en la que importes los datos de `viviendas_turisticas_es_2024.csv` como `raw`, crea un duplicado y ll√°malo `trabajo`.\n\n4.  Renombra la hoja en la que importes los datos de `poblacion_provincias_es.csv` como `poblacion_provincias`.\n\n5.  Revisa el formato de los datos. A veces, las **columnas num√©ricas** se importan con un formato incorrecto. En este caso, aparece un ap√≥strofe oculto (') delante del n√∫mero. La forma m√°s f√°cil de resolver este problema es multiplicar los valores por 1 en la columna contigua. Recuerda nombrarlas como `viviendas_turisticas_clean` y `plazas_clean`, en el caso de la hoja `trabajo`, y `poblacion_clean`, en la hoja `poblacion`.\n\n6.  No olvides poner los encabezados de las nuevas columnas en otro color para indicar que no forman parte de los datos originales.\n:::\n\n#### Lleva los datos de `poblacion_clean` de la hoja `poblacion` a `trabajo`\n\nPuedes usar la funci√≥n `BUSCARV()` para asegurarte de que no se desordenan los datos.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara unir las tablas, crea una columna nueva al final de la hoja `trabajo` y ll√°mala `pob_provincia`. Recuerda poner el encabezado en otro color para saber que es un campo a√±adido.\n\nEn esta columna es donde vamos a aplicar nuestra funci√≥n `BUSCARV()` cuya f√≥rmula se compone del elemento de la columna `provincia` que quiero buscar, el intervalo de la hoja `poblacion_provincias` en el que voy a realizar la b√∫squeda, el √≠ndice o posici√≥n de la informaci√≥n que quiero recuperar. (el dato de poblaci√≥n de la columna `poblacion_clean`) y la indicaci√≥n `FALSE` de que la primera columna del intervalo no est√° ordenada.\n\n`=BUSCARV(B2;poblacion_provincias!B:D;3;FALSO)`\n\nüëÄ **OJO**. No incluyas la columna `ccaa` en tu intervalo.\n\nAplicando esta f√≥rmula en la primera celda `pob_provincia` y arrastrando hacia abajo, recuperaremos el valor de poblaci√≥n de cada provincia.\n:::\n\n#### Observa las variables `viviendas_turisticas_clean` y `plazas_clean`. ¬øCual es m√°s adecuada para analizar la presi√≥n tur√≠stica en cada comunidad aut√≥noma? ¬øPor qu√©?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nLa variable `viviendas_turisticas_clean` representa el n√∫mero de viviendas tur√≠sticas en cada provincia mientras que `plazas_clean` indica el n√∫mero de personas que pueden pernoctar en estas viviendas.\n\nTrabajaremos con `plazas_clean`. Como vamos a calcular una tasa por poblaci√≥n, es preferible calcular *personas respecto a personas* que casas respecto a personas.\n:::\n\n#### ¬øCu√°l es la comunidad aut√≥noma con la mayor presi√≥n de plazas en viviendas tur√≠sticas por habitante en Espa√±a?\n\nUsa una tabla din√°mica sobre la hoja `trabajo` para agrupar los datos de `plazas_clean` y `pob_provincia` por `ccaa`.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nPara crear una tabla din√°mica, selecciona toda la hoja de datos marcando el v√©rtice superior izquierdo de la tabla (a la izquierda de la `columna A` y encima de la `fila 1`). Esto asegura que todos nuestros datos est√©n dentro de la tabla din√°mica.\n\nA continuaci√≥n elige `Insertar > Tabla din√°mica`.\n\nEn el cuadro de di√°logo `Crear tabla din√°mica` ver√°s varias cosas:\n\n-   El `Intervalo de datos` con el que va a trabajar la tabla din√°mica. Si has seleccionado toda la hoja, deber√≠a ser `trabajo!1:1000`.\n-   Tambi√©n podr√°s elegir d√≥nde quieres insertar la hoja. Por norma general, siempre elegimos `Nueva hoja`.\n\nAl pulsar en `Crear`, Google Sheets crear√° una hoja nueva, `Tabla din√°mica 1`, en la que ver√°s una tabla azul vac√≠a. Tambi√©n aparece un panel lateral que nos servir√° para trabajar con la tabla din√°mica.\n\nRenombra la hoja `Tabla din√°mica 1` como `plazas_ccaa` para poder identificarla en el futuro.\n\n1.  A√±ade la columna `ccaa` como `Filas`\n\n2.  A√±ade la columna `plazas_clean` como `Valores` y selecciona `Sumar por` \\> `SUM` para sumar los datos de las provincias de cada comunidad.\n\n3.  Repite el paso anterior con la columna `pob_provincia`.\n\n4.  Para evitar que la tabla din√°mica muestre las columnas vac√≠as, a√±ade cualquier columna al campo `Filtros` y desmarca la opci√≥n `(Vac√≠o)`.\n\n5.  A√±ade un `Campo calculado` en el apartado `Valores` y plantea la f√≥rmula de tasa por habitante: `=(plazas/pob_provincia)*1000`.\n\n6.  En este caso, como estamos agrupando datos por comunidad aut√≥noma a partir de datos por provincia, la opci√≥n `Sumar por` debe mantenerse en `SUM`.\n\n7.  Renombra la columna del `Campo calculado` como `plazas_1000_hab`\n\n8.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `plazas_1000_hab` en las opciones de `Filas`.\n\nEste an√°lisis revela que **Baleares**, **Canarias** y **Cantabria** son las comunidades aut√≥nomas con mayor tasa de plazas en viviendas tur√≠sticas por cada 1.000 habitantes: 130,3; 99,9 y 67, respectivamente.\n:::\n\n#### ¬øQu√© gr√°fico es m√°s adecuado para representar estos datos? ¬øPor qu√©?\n\nüìä Elige una de las opciones y crea un gr√°fico.\n\nEscribe el razonamiento de tu elecci√≥n en el apartado `Descripci√≥n alternativa para lectores de pantalla` del panel `Anotar` de Datawrapper.\n\n::: {.callout-warning title=\"¬°Cuidado!\"}\nTen en cuenta que **no debes incluir la suma total de aparcabicis en tu gr√°fico**, ya que eso distorsionar√° la escala de las barras.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Opci√≥n 1\"}\n**Gr√°fico de barras**\n\nElige la opci√≥n `Crear nuevo...` \\> `Gr√°fico`.\n\n**Paso 1. Cargar datos**\n\n-   En la ventana `Cargar datos` nos mantendremos en la opci√≥n por defecto: `Copiar y pegar tabla de datos`.\n\n-   Ahora copiaremos nuestra tabla de datos mediante el atajo `CTRL + C` con cuidado de no seleccionar la fila `Suma total`.\n\n-   Pegaremos la tabla que acabamos de copiar con `CTRL + V` donde pone `Pega los datos que has copiado aqu√≠...`.\n\n-   Por √∫ltimo, pulsaremos en `Continuar` para avanzar al siguiente paso.\n\n**Paso 2. Verificar y describir**\n\n-   Revisa el formato de las columnas: **negro** cuando es texto y **azul** cuando es n√∫mero.\n\n-   Para que Datawrapper muestre un punto como separador de los miles (1.000), elige `espa√±ol (es-AR)` en `Configuraci√≥n regional del resultado`.\n\n-   Avanza al siguiente paso pulsando `Continuar`.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos el tipo de gr√°fico que vamos a usar y donde aplicamos los estilos.\n\n-   Por defecto, Datawrapper intenta encajar nuestros datos siempre en un gr√°fico de l√≠neas. Elige la opci√≥n `Gr√°fico de barras` en `Tipo de gr√°fico` y avanza a la pesta√±a `Mejorar`.\n\n-   Selecciona la columna que contiene los datos que quieres representar en el primer desplegable si no han aparecido por defecto.\n\n-   Si las barras no aparecen ordenadas, puedes forzar el orden en el apartado `Clasificaci√≥n y agrupaci√≥n` \\> `Organizar barras` del panel `Mejorar`.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"Plazas en viviendas tur√≠sticas por 1.000 habitantes en cada comunidad\".\n\n-   Indica la fuente de tus datos, \"INE\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Opci√≥n 2\"}\n**Mapa de coropletas**\n\nElige la opci√≥n `Crear nuevo...` \\> `Mapa`.\n\nEsto te llevar√° a una p√°gina en la que elegir el tipo de mapa que quieres generar: `Mapa coropl√©tico`.\n\n**Paso 1. Selecciona tu mapa**\n\nEn este paso, debes elegir el mapa con la divisi√≥n territorial en la que est√°n agrupados tus datos. En este caso, necesitamos un mapa de Espa√±a por comunidades aut√≥nomas.\n\nCuando lo hayas encontrado, selecci√≥nalo y pulsa `Continuar`.\n\n**Paso 2. A√±ade tus datos**\n\n-   En la ventana `A√±ade tus datos`, busca la pesta√±a `Cargar`. Copia tu tabla de datos con `CTRL + C` con cuidado de no seleccionar la fila `Suma total` y p√©gala donde pone `Pega tus datos aqu√≠ o directamente en la tabla` con `CTRL + V`.\n\n-   Luego, pulsa en la flecha que ha aparecido para trasladar tus datos a la tabla y avanza a la pesta√±a `Coincidir`.\n\n-   En `Clave coincidente`, elige cu√°l de los nombres que hay guardados dentro del mapa coincide mejor con tu columna de nombres de comunidad aut√≥noma. En este caso, `Nombres (Espa√±ol)`.\n\n-   En `Seleccionar columna para Nombres (Espa√±ol)`, elige cu√°l es la columna de nombres en tus datos: `ccaa`.\n\n-   En `Seleccionar columna para Values`, elige cu√°les son los valores que pintar√°n el mapa. En este caso, `plazas_1000_hab`.\n\n-   En la pesta√±a `Comprobar` aparecer√°n los posibles errores de coincidencia, que tambi√©n aparecer√°n marcados en rojo en la tabla de datos. Basta con desplegar las opciones de cada celda en rojo y asignarle la correspondencia correcta.\n\n-   Cuando todo est√© correcto, pulsa `Continuar` para avanzar al siguiente paso.\n\n**Paso 3. Visualizar**\n\nEn este apartado es en el que elegimos los estilos del gr√°fico.\n\n-   En la pesta√±a anotar, introduce un t√≠tulo para tu gr√°fico. Por ejemplo, \"Plazas en viviendas tur√≠sticas por 1.000 habitantes en cada comunidad\".\n\n-   Indica la fuente de tus datos, \"INE\", en el campo `Fuente de datos`.\n\n-   Incluye una firma para tu gr√°fico en `Producido por`.\n\n-   Activa el bot√≥n `Mostrar etiquetas` en `Etiquetas del mapa` y elige la opci√≥n `Tipo > por columna`. Luego, selecciona tu columna de datos para que aparezca el valor de cada comunidad sobre el mapa.\n\n-   En la pesta√±a `Dise√±o` puedes activar o desactivar la descarga de datos o aplicar un tema para tu gr√°fico, entre otras opciones.\n\n-   Cuando hayas acabado de dise√±ar tu gr√°fico, avanza en el bot√≥n `Continuar`.\n\n**Paso 4. Publicar e integrar**\n\nEste apartado es el que permite publicar tu gr√°fico para compartirlo con el resto del mundo. Obtendr√°s tanto un *enlace* a la visualizaci√≥n como un c√≥digo de inserci√≥n.\n:::\n\n## üî¢ Tasas y valores relativos (II)\n\n### üè† Caso pr√°ctico. Compraventa de vivienda en Espa√±a (I)\n\nResponde a las siguientes preguntas usando los datos de compraventa de viviendas del Consejo General del Notariado disponibles en la siguiente tabla:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|  A√ëO|    AND|   ARA|   AST|    IB|    IC|   CAN|   CyL|   CLM|    CAT|     CV|   EXT|   GAL|   MAD|   MUR|  NAV|    PV|   LR|  TOTAL|\n|----:|------:|-----:|-----:|-----:|-----:|-----:|-----:|-----:|------:|------:|-----:|-----:|-----:|-----:|----:|-----:|----:|------:|\n| 2015|  78029| 11333|  6519| 13089| 20325|  4632| 18352| 14327|  61261|  60040|  6335| 14664| 57802| 12820| 4871| 16829| 3127| 404355|\n| 2016|  84896| 11697|  7611| 16184| 22620|  5257| 20553| 16332|  75493|  68380|  7226| 15726| 67719| 13630| 5174| 19109| 3258| 460865|\n| 2017|  98064| 14006|  9234| 18531| 26798|  6649| 23042| 20744|  86062|  79769|  8315| 17610| 81368| 15595| 6047| 21047| 3747| 536628|\n| 2018| 112580| 15597| 10235| 17634| 25582|  7098| 26093| 23661|  90139|  89398|  9317| 19786| 85736| 18250| 7179| 23413| 4699| 586397|\n| 2019| 111171| 15410| 10158| 15946| 25208|  7268| 25962| 24251|  89661|  85475|  9716| 20444| 79086| 19561| 6570| 23777| 4382| 574046|\n| 2020|  95152| 13634| 10249| 11674| 17221|  6929| 24110| 21543|  74906|  70275|  9458| 19425| 67552| 17143| 6377| 20744| 3815| 490207|\n| 2021| 136696| 17531| 13036| 17804| 24770|  9766| 32934| 29747| 104331|  99712| 12236| 25159| 92236| 23828| 8083| 25502| 5151| 678522|\n| 2022| 144391| 18768| 13915| 19151| 31499|  9427| 34653| 30658| 110648| 113778| 12707| 25995| 90941| 25463| 8102| 26086| 5169| 721351|\n| 2023| 127185| 17121| 14103| 15445| 26395|  8632| 32119| 29573|  96619| 104869| 11660| 24016| 76276| 24349| 7750| 22033| 4416| 642561|\n| 2024| 139591| 18789| 16961| 15532| 27280| 10228| 36536| 34516| 107826| 113980| 13449| 28253| 87494| 26604| 7726| 25918| 5501| 716183|\n\n\n:::\n:::\n\n\n\n#### Escrapea los datos usando la extensi√≥n Table Capture de Google Chrome\n\nRecuerda que puedes descargar e instalar Table Capture desde la [Chrome Web Store](https://chromewebstore.google.com/detail/table-capture/iebpjdmgckacbodjpijphcplhebcmeop?hl=es). Esta aplicaci√≥n analiza la web en busca de estructuras tipo tabla para extraerlas.\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo usar Table Capture?\"}\nUna vez instalado Table Capture, fija la extensi√≥n en la barra de herramientas del navegador.\n\nSelecciona el icono con forma de pieza de puzle, busca Table Capture y f√≠jalo con la chinchetas.\n\nCuando veas el icono en la barra de herramientas, p√∫lsado. La extensi√≥n mostrar√° un desplegable como este, en el que indica cu√°ntas tablas ha encontrado y su tama√±o (filas x columnas).\n\n![](img/table_capture_ejemplo.png){fig-align=\"center\"}\n\nSi pones el rat√≥n encima de una de las tablas, la p√°gina har√° scroll hasta ella para que puedas comprobar que es la correcta.\n\nLuego, solo tendras que seleccionar el icono del partapapeles para copiar los datos o exportarlos directamente a una hoja de c√°lculo.\n\n**IMPORTANTE**: con cualquiera de las dos opciones, tendr√°s que hacer `CTRL + V` para pegarlos en la hoja de destino.\n\nRenombra la hoja donde has pegado los datos como `raw` para no perderlos.\n:::\n\n#### Pivota los datos y limpia las columnas para trabajar con tablas din√°micas\n\nComo las tablas din√°micas solo funcionan si los datos est√°n en vertical (una columna, un tipo de dato), tendr√°s que usar el comando `Pegado especial > Traspuesto` para crear tu hoja `trabajo`.\n\n::: {.callout-tip collapse=\"true\" title=\"Trasponer datos\"}\nGoogle Sheets nos permite copiar y pegar datos cambiando su distribuci√≥n. Para generar una hoja de trabajo con los datos en vertical, primero tenemos que decidir cu√°ntas columnas necesitamos:\n\n-   *ccaa* -\\> Columna con el nombre de la comunidad aut√≥noma\n\n-   *year* -\\> Columna con el a√±o al que hace referencia el dato\n\n-   *viviendas* -\\> Columna con el n√∫mero total de viviendas\n\nUna forma de llegar a este resultado es usando varias veces la opci√≥n `Pegado especial > Traspuesto`.\n\n1.  Crea un duplicado temporal de la hoja `raw` y a√±ade una hoja nueva `trabajo`.\n\n2.  Copia el encabezado y la primera fila de datos de la hoja temporal con `CTRL + C`.\n\n3.  Col√≥cate en la primera celda de la hoja `trabajo` y selecciona `CLIC DERECHO > Pegado Especial > Traspuesto`. Esto generar√° una columna con las comunidades aut√≥nomas y otra con el dato de viviendas.\n\n4.  Escribe el a√±o en la tercera columna de la tabla y exti√©ndelo hacia abajo haciendo `doble clic` en el punto de la esquina inferior derecha de la celda.\n\n5.  Sustituye la primera fila por los encabezados de las nuevas columnas (`ccaa`, `viviendas`, `year`) e inmovil√≠zala.\n\n6.  Vuelve a la hoja temporal, selecciona la fila con el primer a√±o y b√≥rrala haciendo `CLIC DERECHO > Borrar fila`.\n\n7.  Vuelve a copiar el encabezado y la fila con el siguiente a√±o y p√©galo, debajo de los datos que has trasladado antes, en la hoja `trabajo`. Recuerda usar `CLIC DERECHO > Pegado Especial > Traspuesto`.\n\n8.  A√±ade el nuevo a√±o en la columna `year` y elimina la primera fila del nuevo conjunto de datos.\n\nRepite este proceso tantas veces como a√±os hay en tu tabla.\n\n‚ö†Ô∏è **CUIDADO** Vigila no dejar ninguna fila de a√±o entre medias de tus datos (paso 8).\n\nElimina la hoja temporal cuando hayas terminado.\n:::\n\n#### ¬øCu√°nto ha aumentado la compraventa de vivienda a nivel nacional en la √∫ltima d√©cada?\n\nExpresa el resultado en t√©rminos absolutos y relativos empleando una tabla din√°mica.\n\nRecuerda que la f√≥rumula para calcular una variaci√≥n porcentual es:\n\n$$\\text{% Variaci√≥n} = \\left( \\frac{\\text{nuevo} - \\text{antiguo}}{\\text{antiguo}} \\right) \\times 100$$\n\n::: {.callout-warning title=\"¬°Cuidado!\"}\nAl usar tablas din√°micas o hacer operaciones, recuerda que tu fuente de datos incluye los valores totales de Espa√±a.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Variaci√≥n absoluta\"}\nInserta una tabla din√°mica en la que incluyas `ccaa` como `Filas`, `year` como `Columnas` y `viviendas` como valor. Luego, a√±ade `Filtros` para mostrar solo el dato `TOTAL` para los a√±os `2015` y `2024`.\n\nDesmarca todos los campos `Mostrar totales` y renombra la tabla din√°mica como `compraventa_es.`\n\nDespu√©s de filtrar los datos, a√±ade una columna anexa a la tabla din√°mica `variacion_abs` y haz una resta: el dato actual (`2024`) menos el dato previo (`2015`).\n\n-   En 2024 se han vendido **311.828** viviendas m√°s que hace diez a√±os, seg√∫n el Consejo General del Notariado.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Variaci√≥n relativa\"}\nPartiendo del c√°lculo de variaci√≥n absoluta, a√±ade otro columna nueva `variacion_por` y aplica la f√≥rmula de la variaci√≥n:\n\n$$\\text{% Variaci√≥n} = \\left( \\frac{\\text{nuevo} - \\text{antiguo}}{\\text{antiguo}} \\right) \\times 100$$ - La compraventa de vivienda en Espa√±a **ha aumentado un 77,1%** en la √∫ltima d√©cada, seg√∫n datos del Consejo General del Notariado.\n:::\n\n#### ¬øCu√°l es la comunidad aut√≥noma con el mayor incremento en t√©rminos relativos de la √∫ltima d√©cada?\n\nRepite el ejercicio anterior, filtrando solo las comunidades aut√≥nomas.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nInserta una tabla din√°mica en la que incluyas `ccaa` como `Filas`, `year` como `Columnas` y `viviendas` como valor. Luego, a√±ade `Filtros` para ocultar las celdas sin datos, `(Vac√≠o)`, y el `TOTAL`; y para ver solo los a√±os `2015` y `2024`.\n\nDesmarca todos los campos `Mostrar totales` y renombra la tabla din√°mica como `compraventa_ccaa`.\n\nDespu√©s de filtrar los datos, a√±ade una columna anexa a la tabla din√°mica `variacion_por` y aplica la f√≥rmula de la variaci√≥n:\n\n$$\\text{% Variaci√≥n} = \\left( \\frac{\\text{nuevo} - \\text{antiguo}}{\\text{antiguo}} \\right) \\times 100$$ - **Asturias** es la comunidad aut√≥noma con el mayor incremento de la compravente desde 2015. Ha crecido un **160,2%**, pasando de 6.519 operaciones a 16.961.\n:::\n\n#### Haz un gr√°fico de slopes (pendientes) que muestre el valor final y el incremento porcentual en las etiquetas\n\nPartiendo de la tabla din√°mica anterior...\n\n-   Crea un diccionario de comunidades aut√≥nomas y traslada los nombres limpios a la columna `ccaa_clean` con la funci√≥n `BUSCARV()`.\n\n-   Utiliza la funci√≥n `CONCATENAR()` en la columna `etiquetas` para crear una cadena de texto.\n\n-   Pivota los datos de la tabla din√°mica con `CLIC DERECHO > Pegado Especial > Traspuesto`\n\n::: {.callout-note title=\"CONCATENAR()\"}\nTen en cuenta que la funci√≥n concatenar permite combinar texto entrecomillado y referencias a celdas concretas separando cada argumento con punto y coma.\n\nA veces, ser√° necesario redondear los decimales de las cifras con `REDONDEAR()`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nCopia la columna `ccaa` y p√©gala en una nueva hoja a la que llamaremos `diccionario`. Al lado, crea la columna `ccaa_clean` y escribe los nombres de las comunidades tal y como quieras que aparezcan en el gr√°fico.\n\nVuelve a la tabla din√°mica `compraventa_ccaa` y a√±ade una columna `ccaa_clean` nueva por delante de la tabla din√°mica: `CLIC DERECHO` \\> `Insertar 1 columna a la izquierda`.\n\nAplica la funci√≥n `BUSCARV()` para trasladar los datos: `=BUSCARV(B3;diccionario!A:B;2;FALSO)`.\n\nJunto a la columna `variacion_por` a√±ade la columna `etiquetas` y aplica la funci√≥n `CONCATENAR()`: `=CONCATENAR(A3;\" \";REDONDEAR(E3;1);\"%\")`\n\nEn una nueva hoja `grafico_variacion`, copia y pega la tabla din√°mica llevando solo los valores `CTRL + SHIFT + V`. Luego, limpia y reordena las columnas:\n\n-   Elimina la primera fila, ya que tiene celdas vac√≠as, e inmoviliza los encabezados\n\n-   Arrastra la columna `etiquetas` delante de la columna `2015`\n\n-   Elimina todas las columnas sobrantes, menos `etiquetas`, `2015` y `2024`.\n\nLleva los datos de `grafico_variacion` a Datawrapper y crea un gr√°fico de l√≠neas:\n\n-   Pivota los datos con `Intercambiar filas y columnas (transponer)` en la pantalla `Verificar y describir` para tener tantas columnas como comunidades aut√≥nomas.\n\n-   Escribe los a√±os 2015 y 2024 en `Eje horizontal` \\> `Referencias personalizadas` y selecciona `Formato de fecha` \\> `2015, 2016`.\n\n-   Selecciona `Formato num√©rico` \\> `10,000` en `Eje vertical`\n\n-   Selecciona `Nada` en el apartado `L√≠neas` y elige las etiquetas de las CCAA que quieres destacar en `Visualizar` \\> `Mejorar` \\> `Personalizar l√≠neas` \\> `Label` \\> `Junto a la l√≠nea`.\n\n-   Elige un color para las comunidades que quieres destacar y usa el gris para el resto.\n\n-   Aumenta el `Margen de la etiqueta` en `Aspecto` hasta que las etiquetas del gr√°fico se lean bien.\n\n-   En `Anotar` \\> `Resaltar rango`, a√±ade dos l√≠neas verticales para marcar 2015 y 2024.\n\n-   Completa los campos `T√≠tulo`, `Fuente de datos` y `Producido por` en `Anotar`.\n:::\n\nEl gr√°fico de pendientes o slopes muestra tanto el cambio absoluto de los valores, va del punto A al punto B, como su variaci√≥n relativa, a trav√©s de la pendiente de la recta que se forma al unir los puntos.\n\n#### Duplica el gr√°fico de slopes y transf√≥rmalo en uno de flechas\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n-   Vuelve a pivotar los datos con el bot√≥n `Intercambiar filas y columnas (transponer)` en la pantalla `Verificar y describir` para tener cada comunidad aut√≥noma en una fila.\n\n-   En `Visualizar`, selecciona el `Tipo de gr√°fico` \\> `Gr√°fico de flechas`.\n\n-   Ve a los controles de `Mejorar` y pon el `Inicio de la flecha` en 2015 y el `Fin de la flecha` en 2024.\n\n-   En `Etiquetas`, activa `Mostrar valores` y selecciona `Ambos`.\n\n-   Ordena los datos en `Clasificaci√≥n y agrupaci√≥n` \\> `Ordenar filas` \\> `Diferencia` y elige `Orden inverso` para facilitar la lectura.\n\n-   Borra las anotaciones de l√≠nea que pusimos en el gr√°fico original en `Resaltar rango`.\n:::\n\n#### ¬øEn qu√© a√±os decreci√≥ el n√∫mero de operaciones en t√©rminos interanuales?\n\n> Calcula la variaci√≥n interanual con una tabla din√°mica y la f√≥rmula de la variaci√≥n porcentual\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n-   Crea una nueva tabla din√°mica `variacion_interanual` a partir de la hoja `trabajo`\n\n-   A√±ade la columna `year` como `Filas` y la columna `viviendas` como `Valores`. Pon la columna `ccaa` en `Filtros` y selecciona solo el `TOTAL`.\n\n-   A√±ade la columna `var_interanual` al lado de la tabla din√°mica y aplica la f√≥rmula de la variaci√≥n porcentual de forma que puedas arrastrarla hacia abajo.\n\n**IMPORTANTE**. Como la variaci√≥n se calcula de un a√±o respecto al anterior, el primer a√±o de tu serie no tendr√° valor.\n\n-   Las operaciones de compraventa disminuyeron en 2008, 2009, 2011, 2013, 2019, 2020 y 2023 respecto al a√±o anterior.\n:::\n\n> Elige el mejor gr√°fico para representar esa variaci√≥n y justifica tu respuesta. ¬øObservas alg√∫n patr√≥n o tendencia? ¬øHay alg√∫n valor significativo que puedas destacar en tu historia?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nUna buena soluci√≥n es hacer un **gr√°fico de columnas**, ya que mostrar√° columnas hacia arriba, cuando las operaciones de compraventa crecen, y hacia abajo, cuando decrecen. Adem√°s, las columnas se mostrar√°n ordenadas a lo largo de un eje horizontal (x) de a√±os, por lo que puede observarse una evoluci√≥n.\n\nElige dos colores: uno para los valores positivos y otro para los negativos.\n\nA veces, como en este caso, los datos no muestran un patr√≥n. Pero la reducci√≥n de 2008 (-33,8%) y el incremento de 2022 (+38,4%) coincidieron con el estallido de la burbuja inmobiliaria, en el primer caso, y con el repunte de los tipos de inter√©s, en el segundo.\n:::\n\n## üß† Tu turno (III)\n\n### üè† Caso pr√°ctico. Compraventa de vivienda en Espa√±a (II)\n\nResponde a las siguientes preguntas a partir de los datos de **precio medio del metro cuadrado** del Consejo General del Notariado.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|  A√ëO|  AND|  ARA|  AST|   IB|   IC|  CAN| CyL| CLM|  CAT|   CV| EXT|  GAL|  MAD|  MUR|  NAV|   PV|   LR| TOTAL|\n|----:|----:|----:|----:|----:|----:|----:|---:|---:|----:|----:|---:|----:|----:|----:|----:|----:|----:|-----:|\n| 2019| 1232| 1044| 1036| 2453| 1470| 1157| 785| 665| 1770| 1120| 584|  961| 2239|  879| 1376| 2319| 1026|  1437|\n| 2020| 1227| 1018| 1101| 2615| 1487| 1165| 805| 674| 1796| 1104| 601|  934| 2209|  849| 1334| 2358|  990|  1431|\n| 2021| 1326| 1014| 1080| 2986| 1604| 1208| 799| 704| 1848| 1166| 603|  986| 2369|  887| 1435| 2376|  932|  1507|\n| 2022| 1441| 1107| 1130| 3198| 1770| 1298| 848| 693| 1975| 1286| 606| 1005| 2653|  985| 1440| 2513|  939|  1615|\n| 2023| 1487| 1103| 1152| 3185| 1821| 1352| 850| 747| 2012| 1348| 617| 1030| 2772| 1004| 1636| 2602| 1009|  1640|\n| 2024| 1608| 1183| 1187| 3671| 1928| 1500| 904| 762| 2125| 1455| 641| 1131| 3009| 1040| 1622| 2688| 1059|  1753|\n\n\n:::\n:::\n\n\n\n#### Escrapea los datos y transf√≥rmalos a formato vertical\n\nUsa la opci√≥n `CLIC DERECHO > Pegado Especial > Traspuesto`\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nDespu√©s de escrapear los datos con `Table Capture` puedes generar una hoja de trabajo con los datos en vertical, primero tenemos que decidir cu√°ntas columnas necesitamos:\n\n-   *ccaa* -\\> Columna con el nombre de la comunidad aut√≥noma\n\n-   *year* -\\> Columna con el a√±o al que hace referencia el dato\n\n-   *precio_m2* -\\> Columna con el precio por metro cuadrado en euros\n\nUna forma de llegar a este resultado es usando varias veces la opci√≥n `Pegado especial > Traspuesto`.\n\n1.  Crea un duplicado temporal de la hoja `raw` y a√±ade una hoja nueva `trabajo`.\n\n2.  Copia el encabezado y la primera fila de datos de la hoja temporal con `CTRL + C`.\n\n3.  Col√≥cate en la primera celda de la hoja `trabajo` y selecciona `CLIC DERECHO > Pegado Especial > Traspuesto`. Esto generar√° una columna con las comunidades aut√≥nomas y otra con el dato de viviendas.\n\n4.  Escribe el a√±o en la tercera columna de la tabla y exti√©ndelo hacia abajo haciendo `doble clic` en el punto de la esquina inferior derecha de la celda.\n\n5.  Sustituye la primera fila por los encabezados de las nuevas columnas (`ccaa`, `precio_m2`, `year`) e inmovil√≠zala.\n\n6.  Vuelve a la hoja temporal, selecciona la fila con el primer a√±o y b√≥rrala haciendo `CLIC DERECHO > Borrar fila`.\n\n7.  Vuelve a copiar el encabezado y la fila con el siguiente a√±o y p√©galo, debajo de los datos que has trasladado antes, en la hoja `trabajo`. Recuerda usar `CLIC DERECHO > Pegado Especial > Traspuesto`.\n\n8.  A√±ade el nuevo a√±o en la columna `year` y elimina la primera fila del nuevo conjunto de datos.\n\nRepite este proceso tantas veces como a√±os hay en tu tabla.\n\n‚ö†Ô∏è **CUIDADO** Vigila no dejar ninguna fila de a√±o entre medias de tus datos (paso 8).\n\nElimina la hoja temporal cuando hayas terminado.\n:::\n\n#### ¬øCu√°ntas comunidades tienen un precio medio del metro cuadrado por encima del precio medio nacional?\n\nObserva tus datos `raw`. No necesitas crear una tabla din√°mica para responder a esta pregunta.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nBasta con mirar la √∫ltima fila de la tabla raw e identificar qu√© valores est√°n por encima de 1.753 euros.\n\nUna opci√≥n r√°pida, es trasponer los datos de la fila de 2024 con `CLIC DERECHO > Pegado Especial > Traspuesto` en una nueva hoja `precios_2024` y reordenarla por la columna `precio_m2`.\n\nTambi√©n puedes aplicar filtros en la hoja `trabajo` para ver solo los datos de 2024 ordenados de mayor a menor.\n\n-   Baleares (3.671 ‚Ç¨), Madrid (3.009 ‚Ç¨), Pa√≠s Vasco (2.688 ‚Ç¨), Catalu√±a (2.125) y Canarias (1.928 ‚Ç¨) superan el precio medio del conjunto de Espa√±a.\n:::\n\n#### ¬øCu√°l es la comunidad con la mayor subida relativa del precio por metro cuadrado de la vivienda despu√©s de la pandemia?\n\nCalcula la variaci√≥n porcentual de 2024 respecto a 2019.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nCrea una tabla din√°mica a partir de la hoja `trabajo`, colocando `ccaa` en `Filas`, `year` en `Columnas` y `precio_m2` en valores. Adem√°s, a√±ade `year` a `Filtros` para ver solo los datos de 2019 y 2024.\n\nDespu√©s, aplica en una celda junto a la tabla din√°mica la ecuaci√≥n de la variaci√≥n porcentual:\n\n$$\\text{% Variaci√≥n} = \\left( \\frac{\\text{nuevo} - \\text{antiguo}}{\\text{antiguo}} \\right) \\times 100$$\n\nTu f√≥rmula deber√≠a ser parecida a esta `=((C3-B3)/B3)*100`\n\n-   Baleares es la comunidad aut√≥noma con el mayor incremento respecto a antes de la pandemia. El precio ha subido un 49,7%, de los 2.453 euros a los 3.671.\n:::\n\n> ¬øQu√© gr√°fico servir√≠a para representar estos incrementos tanto de forma absoluta como relativa? ¬øQu√© datos son necesarios? Haz la visualizaci√≥n en Datawrapper\n\n::: {.callout-tip collapse=\"true\" title=\"Opci√≥n \"}\nEl gr√°fico de **slopes** permite mostrar los incrementos absolutos (en euros) y relativos (en %).\n\nCrea un `diccionario` con las columnas `ccaa` y `ccaa_clean` para escribir los y escribe los nombres de las comunidades tal y como quieras que aparezcan en el gr√°fico.\n\nVuelve a la tabla din√°mica `compraventa_ccaa` y a√±ade una columna `ccaa_clean` nueva por delante de la tabla din√°mica: `CLIC DERECHO` \\> `Insertar 1 columna a la izquierda`.\n\nAplica la funci√≥n `BUSCARV()` para trasladar los datos: `=BUSCARV(B3;diccionario!A:B;2;FALSO)`.\n\nJunto a la columna `variacion_por` a√±ade la columna `etiquetas` y aplica la funci√≥n `CONCATENAR()`: `=CONCATENAR(A3;\" \";REDONDEAR(E3;1);\"%\")`\n\nEn una nueva hoja `grafico_variacion`, copia y pega la tabla din√°mica llevando solo los valores `CTRL + SHIFT + V`. Luego, limpia y reordena las columnas:\n\n-   Elimina la primera fila, ya que tiene celdas vac√≠as, e inmoviliza los encabezados.\n\n-   Arrastra la columna `etiquetas` delante de la columna `2019`.\n\n-   Elimina todas las columnas sobrantes, menos `etiquetas`, `2019` y `2024`.\n\nLleva los datos de `grafico_variacion` a Datawrapper y crea un gr√°fico de l√≠neas:\n\n-   Pivota los datos con `Intercambiar filas y columnas (transponer)` en la pantalla `Verificar y describir` para tener tantas columnas como comunidades aut√≥nomas.\n\n-   Escribe los a√±os 2019 y 2024 en `Eje horizontal` \\> `Referencias personalizadas` y selecciona `Formato de fecha` \\> `2015, 2016`.\n\n-   Selecciona `Formato num√©rico` \\> `10,000` en `Eje vertical`\n\n-   Selecciona `Nada` en el apartado `L√≠neas` y elige las etiquetas de las CCAA que quieres destacar en `Visualizar` \\> `Mejorar` \\> `Personalizar l√≠neas` \\> `Label` \\> `Junto a la l√≠nea`.\n\n-   Elige un color para las comunidades que quieres destacar y usa el gris para el resto.\n\n-   Aumenta el `Margen de la etiqueta` en `Aspecto` hasta que las etiquetas del gr√°fico se lean bien.\n\n-   En `Anotar` \\> `Resaltar rango`, a√±ade dos l√≠neas verticales para marcar 2015 y 2024.\n\n-   Completa los campos `T√≠tulo`, `Fuente de datos` y `Producido por` en `Anotar`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Opci√≥n 2\"}\nEl gr√°fico de **flechas** permite mostrar los incrementos absolutos (en euros) y relativos (en %), con la longitud de la flecha.\n\nCrea un `diccionario` con las columnas `ccaa` y `ccaa_clean` para escribir los y escribe los nombres de las comunidades tal y como quieras que aparezcan en el gr√°fico.\n\nVuelve a la tabla din√°mica `compraventa_ccaa` y a√±ade una columna `ccaa_clean` nueva por delante de la tabla din√°mica: `CLIC DERECHO` \\> `Insertar 1 columna a la izquierda`.\n\nAplica la funci√≥n `BUSCARV()` para trasladar los datos: `=BUSCARV(B3;diccionario!A:B;2;FALSO)`.\n\nEn una nueva hoja `grafico_variacion`, copia y pega la tabla din√°mica llevando solo los valores `CTRL + SHIFT + V`. Luego, limpia y reordena las columnas:\n\n-   Elimina la primera fila, ya que tiene celdas vac√≠as, e inmoviliza los encabezados.\n\n-   Arrastra la columna `ccaa_clean` delante de la columna `2019`.\n\n-   Elimina todas las columnas sobrantes, menos `ccaa_clean`, `2019` y `2024`.\n\nCrea un gr√°fico nuevo en Datawrapper y lleva tus datos a la pantalla `Verificar y describir`. Debes tener cada comunidad aut√≥noma en una fila.\n\n-   En `Visualizar`, selecciona el `Tipo de gr√°fico` \\> `Gr√°fico de flechas`.\n\n-   Ve a los controles de `Mejorar` y pon el `Inicio de la flecha` en 2019 y el `Fin de la flecha` en 2024.\n\n-   En `Etiquetas`, activa `Mostrar valores` y selecciona `% de cambio`.\n\n-   Tambi√©n puedes activar la opci√≥n `Etiquetar la primera flecha` para mostrar el a√±o de inicio y el de fin.\n\n-   Desplaza el eje horizontal a la parte superior con `Eje horizontal` \\> `Posici√≥n de los valores de referencia` \\> `encima`\n\n-   Ordena los datos en `Clasificaci√≥n y agrupaci√≥n` \\> `Ordenar filas` \\> `% de cambio` y elige `Orden inverso` para facilitar la lectura.\n\n-   Completa los campos `T√≠tulo`, `Fuente de datos` y `Producido por` en `Anotar`.\n\nEste formato permite leer el valor inicial y el final con el inicio y el final de la flecha y el porcentaje de cambio como anotaci√≥n.\n:::\n\n#### ¬øEn qu√© a√±o se produjo la mayor subida interanual del precio del metro cuadrado en Espa√±a?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n-   Crea una nueva tabla din√°mica `variacion_interanual` a partir de la hoja `trabajo`\n\n-   A√±ade la columna `year` como `Filas` y la columna `precio_m2` como `Valores`. Pon la columna `ccaa` en `Filtros` y selecciona solo el `TOTAL`.\n\n-   A√±ade la columna `var_interanual` al lado de la tabla din√°mica y aplica la f√≥rmula de la variaci√≥n porcentual de forma que puedas arrastrarla hacia abajo.\n\n**IMPORTANTE**. Como la variaci√≥n se calcula de un a√±o respecto al anterior, el primer a√±o de tu serie no tendr√° valor.\n\n-   El precio subi√≥ todos los a√±os salvo entre 2019 y 2020. La mayor subida se produjo de 2021 a 2022 (7,17%), cuando el precio pas√≥ de 1.507 ‚Ç¨/m2 a 1.615 ‚Ç¨/m2.\n:::\n\n> Elige el gr√°fico m√°s adecuado para representar este dato y gen√©ralo en Datawrapper\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nUna buena soluci√≥n es hacer un **gr√°fico de columnas**, ya que mostrar√° columnas hacia arriba, cuando las operaciones de compraventa crecen, y hacia abajo, cuando decrecen. Adem√°s, las columnas se mostrar√°n ordenadas a lo largo de un eje horizontal (x) de a√±os, por lo que puede observarse una evoluci√≥n.\n\nElige dos colores: uno para los valores positivos y otro para los negativos.\n:::\n\n## üìä Mejorar la lectura de un gr√°fico\n\nRecuerda que debes elegir tu visualizaci√≥n para ponerla al servicio de lo que quieras contar:\n\n::: panel-tabset\n#### Evoluci√≥n\n\n+:----------------------------------------------:+:-------------------------------------------------------:+:---------------------------------------------------------------------------------------:+\n| ![](img/grafico_linea_simple.png){width=\"130\"} | ![](img/grafico_area.png){width=\"130\"}                  | ![](img/grafico_linea_multiple.png){width=\"130\" height=\"96\"}                            |\n+------------------------------------------------+---------------------------------------------------------+-----------------------------------------------------------------------------------------+\n| **Gr√°fico de l√≠nea**                           | **Gr√°fico de √°reas**                                    | **Gr√°fico de l√≠neas m√∫ltiple**                                                          |\n+------------------------------------------------+---------------------------------------------------------+-----------------------------------------------------------------------------------------+\n| Si solo tienes una variable                    | Si tienes m√°s de una variable y forman parte de un todo | Si tienes m√∫ltiples variables que no forman un todo pero comparten una unidad de medida |\n+------------------------------------------------+---------------------------------------------------------+-----------------------------------------------------------------------------------------+\n\n#### Comparaciones\n\n+:------------------------------------------------------:+:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:+:-------------------------------------------------------------:+\n| ![](img/grafico_columnas.png){width=\"100\" height=\"96\"} | ![](img/grafico_columnas_apiladas.png){width=\"80\" height=\"80\"}![](img/grafico_columnas_stacked.png){width=\"80\" height=\"80\"}![](img/grafico_treemap.png){width=\"80\" height=\"80\"} | ![](img/grafico_mapa_coropletas.png){width=\"130\" height=\"96\"} |\n+--------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------+\n| **Gr√°fico de columnas**                                | **Columnas apiladas / stacked / treemap**                                                                                                                                       | **Mapas de coropletas**                                       |\n+--------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------+\n| Magnitud en el tiempo                                  | Un todo y sus partes                                                                                                                                                            | Considerando la geograf√≠a                                     |\n+--------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------+\n\n#### Tendencias/distribuciones\n\n+:----------------------------------------------:+:--------------------------------------------------------:+\n| ![](img/grafico_scatter_plot.png){width=\"150\"} | ![](img/grafico_histograma.png){width=\"130\"}             |\n+------------------------------------------------+----------------------------------------------------------+\n| **Diagrama de dispersi√≥n**                     | **Histograma**                                           |\n+------------------------------------------------+----------------------------------------------------------+\n| Mostrar relaci√≥n entre dos variables           | Mostrar la distribuci√≥n de una sola variable o de varias |\n+------------------------------------------------+----------------------------------------------------------+\n\n#### Flujos\n\n+:-------------------------------------------------:+:--------------------------------------------------:+\n| ![](img/grafico_diagrama_sankey.png){width=\"130\"} | ![](img/grafico_diagrama_cuerdas.png){width=\"130\"} |\n+---------------------------------------------------+----------------------------------------------------+\n| Diagrama de Sankey                                | Diagrama de cuerdas                                |\n+---------------------------------------------------+----------------------------------------------------+\n| Muestra los flujos de un sistema                  | Muestra relaciones ponderadas y flujos entre nodos |\n+---------------------------------------------------+----------------------------------------------------+\n:::\n\n## üß† Tu turno (IV)\n\n### ü´† Preocupaci√≥n por el cambio clim√°tico y los bulos\n\nDescarga el archivo `pew_cambio_climatico_bulos_2022.csv` y genera un gr√°fico en Datawrapper que mejore la siguiente visualizaci√≥n. El gr√°fico debe permitir comparar al mismo tiempo la diferencia entre la preocupaci√≥n por el cambio clim√°tico y por los bulos en cada pa√≠s, as√≠ como entre los distintos pa√≠ses.\n\nüîó [pew_cambio_climatico_bulos_2022.csv](datos/pew_cambio_climatico_bulos_2022.csv)\n\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/pew-chart-1.png){width=1344}\n:::\n:::\n\n\n\n## üò® Tabula: cuando los datos vienen en el peor formato posible\n\n![](img/semaforo-datos.svg){fig-align=\"center\" width=\"15%\"}\n\nA veces, tus datos pueden llegar en formatos que no son muy accesibles, como los PDF. Y lo primero que debes hacer es limpiar esos datos para poder empezar a trabajar con ellos.\n\nTabula es una aplicaci√≥n creada por Manuel Aristar√°n, Mike Tigas, Jeremy B. Merrill y Jason Das con el apoyo de ProPublica, La Naci√≥n DATA, Knight-Mozilla OpenNews y The New York Times. Es una herramienta gratuita y de software libre hecha por periodistas para periodistas que sirve para impulsar el periodismo de datos en todo tipo de redacciones.\n\nLa aplicaci√≥n permite extraer los datos de un `PDF` y convertirlos en `CSV` o en una `hoja de c√°lculo de Microsoft Excel`.\n\n::: {.callout-important title=\"Importante\"}\nTabula solo funciona en PDF basado en texto. No sirve para documentos escaneados.\n:::\n\nüîó [Descargar la √∫ltima versi√≥n de Tabula](https://tabula.technology/)\n\n::: {.callout-tip collapse=\"true\" title=\"C√≥mo usar Tabula\"}\n1.  Importa tu PDF de datos.\n\n2.  Busca la(s) p√°gina(s) donde se encuentran tus tablas y selecci√≥nalas dibujando un cuadro alrededor de ellas.\n\n3.  Pulsa `Preview & Export Extracted Data`. Tabula intentar√° extraer tus datos y mostrar√° una preview del resultado.\n\n4.  Comprueba esta muestra para asegurarte de que es correcta o, al menos, de que la herramienta ofrece una selecci√≥n con la que luego puedes limpiar en Google Sheets.\n\n5.  Si faltan datos o ves alg√∫n error, vuelve atr√°s y ajusta tu selecci√≥n.\n\n6.  Cuando todo est√© correcto, descarga tu CSV e imp√≥rtalo en Google Sheets para seguir trabajando.\n:::\n\n### ‚òéÔ∏è Caso pr√°ctico. Llamadas al 112 durante la dana de Valencia (I)\n\nEn plena investigaci√≥n de la dana que asol√≥ la provincia de Valencia el pasado 29 de octubre de 2024, la Generalitat public√≥ un [listado con todas las llamadas](https://www.rtve.es/noticias/20250304/112-recibio-19821-llamadas-gestiono-4770-incidentes-dia-dana/16475826.shtml) que los valencianos hicieron ese d√≠a al tel√©fono de emergencias 112.\n\nEl documento PDF contiene tres anexos con informaci√≥n relevante que se puede abordar desde la perspectiva del periodismo de datos:\n\n-   Anexo I. Evoluci√≥n del n√∫mero de llamadas recibidas y el n√∫mero de incidentes gestionados en 1¬∑1¬∑2 Comunitat Valenciana durante el d√≠a 29 de octubre\n\n-   Anexo II. Tabla del primer incidente referido a la afectaci√≥n a personas en cada uno de los municipios de la provincia de Valencia\n\n-   Anexo III. Tabla del conjunto de los incidentes gestionados en la provincia de Valencia relacionados con la clasificaci√≥n Fen√≥meno Natural \\> Meteorol√≥gico. Se incluyen dos listados uno cronol√≥gico por hora y un segundo por municipios y horas\n\n#### Descarga el PDF facilitado por la Generalitat Valenciana\n\nüîó [llamadas_112_valencia.pdf](datos/llamadas_112_valencia.pdf)\n\n#### Sube el PDF a Tabula y descarga el Anexo I\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  Importa tu PDF de datos.\n\n2.  Busca la(s) p√°gina(s) donde se encuentran tus tablas y selecci√≥nalas dibujando un cuadro alrededor de ellas.\n\n3.  Pulsa `Preview & Export Extracted Data`. Tabula intentar√° extraer tus datos y mostrar√° una preview del resultado.\n\n4.  Comprueba esta muestra para asegurarte de que es correcta o, al menos, de que la herramienta ofrece una selecci√≥n con la que luego puedes limpiar en Google Sheets.\n\n5.  Si faltan datos o ves alg√∫n error, vuelve atr√°s y ajusta tu selecci√≥n.\n\n6.  Cuando todo est√© correcto, descarga tu CSV e imp√≥rtalo en Google Sheets para seguir trabajando.\n:::\n\n#### Importa el CSV obtenido con Tabula en Google Sheets\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nImporta el archivo desde: `Archivo > Importar > Subir > (Selecciona o arrastra tu archivo)`\n\n-   Ubicaci√≥n de importaci√≥n -\\> Remplazar la hoja actual\n\n-   Tipo de separador -\\> Detectar autom√°ticamente\n\n-   Convertir texto en n√∫mero, fechas y formas -\\> No\n:::\n\n#### Crea las hojas `raw` y `trabajo` y termina de limpiar los datos\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  Renombra la hoja en la que has importado los datos como `raw`.\n\n2.  Crea un duplicado `trabajo` de la hoja `raw`.\n\n3.  Inmoviliza la primera fila para facilitar la visualizaci√≥n.\n\n4.  Revisa los nombres de las columnas para comprobar si describen el contenido.\n\nüí° **Consejo**: utiliza un color en el encabezado para identificar las columnas de tratamiento de las que contienen los datos originales.\n\n4.  ¬øTienen todas las columnas el formato adecuado? Aseg√∫rate de que la columna `Hora` es `texto`. `Llamadas Recibidas` y `Incidentes Gestionados` deben ser `n√∫mero` con `Formato > N√∫mero > Autom√°tico`.\n\nüí° **OJO** Los n√∫meros deben quedar sin separador entre los miles: ni comas ni puntos.\n\nRecuerda que, a veces, las **columnas num√©ricas** se importan con un formato incorrecto. En este caso, aparece un ap√≥strofe oculto (') delante del n√∫mero. La forma m√°s f√°cil de resolver este problema es multiplicar los valores por 1 en una nueva columna de la hoja `trabajo`.\n:::\n\n#### Elige el mejor gr√°fico para representar la variable `Llamadas Recibidas`\n\n> En este caso, lo que m√°s nos va a interesar es detectar el momento en el que se produjo el pico con m√°s llamadas.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nHay dos opciones posibles: una **curva** o un gr√°fico de **columnas**.\n\nEn ambos casos, basta con llevar los datos de la hoja `trabajo` a Datawrapper con `CTRL + C` y `CTRL + V`. Luego, recuerda ocultar la columna `Incidentes Gestionados`.\n\nAlterna entre las vistas de `L√≠neas` y `Gr√°fico de columnas` en el men√∫ `Tipo de gr√°fico` de la pantalla `Visualizar`. Cuando te hayas decidido por una de estas dos opciones, avanza por los men√∫s `Mejorar` y `Anotar` para aplicar estilos al gr√°fico.\n:::\n\n#### ¬øQu√© puedes hacer con los datos para crear una curva que muestre el n√∫mero acumulado de llamadas que se produjeron a lo largo del d√≠a?\n\n> Ese gr√°fico nos puede ayudar a responder preguntas como: ¬øcu√°ntas llamadas recibi√≥ el 112 el 29 de octubre de 2024 en Valencia? ¬øCu√°ntas llamadas se hab√≠an recibido antes de que se enviase el mensaje de alerta a las 20:11 horas?\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nLo que queremos hacer en este gr√°fico es **pasar de los datos horarios** que hemos representado en el ejercicio anterior **a un dato acumulado**. Para ello, basta con sumar al primer valor de la tabla el siguiente de forma consecutiva en una nueva columna.\n\nCrea una columna nueva en tu hoja `trabajo` que nombraremos como `llamadas_acumuladas`. En la primera celda de esta columna debes incluir el mismo n√∫mero que aparezca en `Llamadas Recibidas`, ya que ese es el total de llamadas que se hab√≠an producido hasta esa hora. Puedes copiarlo directamente o \"llamarlo\" desde su celda original con una igualdad: `=B2`.\n\nEn la siguiente celda, debes sumar al valor anterior las llamadas que se produjeron durante la siguiente hora, de modo que tu f√≥rmula deber√≠a ser algo parecido a `=D2+B3`.\n\nSi arrastras esta f√≥rmula hasta la √∫ltima celda de la columna `llamadas_acumuladas` deber√≠as tener un total de **19.821 llamadas** hasta las 23:00 horas.\n\nEstos datos ya pueden llevarse a un gr√°fico de Datawrapper con un enfoque como: **El 112 recibi√≥ m√°s de 15.000 llamadas antes de que el CECOPI enviase la alerta por la dana**.\n:::\n\n## üß† Tu turno (V)\n\n### ‚òéÔ∏è Caso pr√°ctico. Llamadas al 112 durante la dana de Valencia (II)\n\n#### Escrapea los datos de incidentes por municipio del anexo III con Tabula e importa el CSV a un nuevo documento de trabajo.\n\n> Descarga el PDF si a√∫n no lo has hecho üîó [llamadas_112_valencia.pdf](datos/llamadas_112_valencia.pdf)\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  Importa tu PDF de datos.\n\n2.  Busca la(s) p√°gina(s) donde se encuentran tus tablas y selecci√≥nalas dibujando un cuadro alrededor de ellas.\n\n3.  Selecciona primero la p√°gina del encabezado y haz lo mismo en la segunda. Luego, pulsa el bot√≥n `Repeat this Selection` para repetir la misma selecci√≥n en las pr√≥ximas p√°ginas del documento.\n\n4.  Desciende hasta la √∫ltima p√°gina del documento y ajusta la selecci√≥n a la tabla.\n\n5.  Pulsa `Preview & Export Extracted Data`. Tabula intentar√° extraer tus datos y mostrar√° una preview del resultado.\n\n6.  Comprueba esta muestra para asegurarte de que es correcta o, al menos, de que la herramienta ofrece una selecci√≥n con la que luego puedes limpiar en Google Sheets.\n\n7.  Si faltan datos o ves alg√∫n error, vuelve atr√°s y ajusta tu selecci√≥n.\n\n8.  Cuando todo est√© correcto, descarga tu CSV e imp√≥rtalo en Google Sheets para seguir trabajando.\n\n9.  En un nuevo documento de Google Sheets, importa el archivo desde: `Archivo > Importar > Subir > (Selecciona o arrastra tu archivo)`\n\n-   Ubicaci√≥n de importaci√≥n -\\> Reemplazar la hoja actual\n\n-   Tipo de separador -\\> Detectar autom√°ticamente\n\n-   Convertir texto en n√∫mero, fechas y formas -\\> No\n\n10. Renombra esta hoja como `raw` y haz un duplicado `trabajo`.\n\n11. Inmoviliza la primera fila de la hoja `trabajo` y aplica un filtro para detectar y eliminar las posibles filas en blanco o encabezados repetidos.\n\nCuando hayas acabado la limpieza, tendr√°s un documento de **2.343 filas**, una por cada evento atendido por el 112.\n:::\n\n#### Usa la funci√≥n `SPLIT()` y crea una tabla din√°mica para saber cu√°ntos fen√≥menos naturales ha habido por tipo.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn una columna en blanco de la hoja `trabajo`, escribe la funci√≥n `SPLIT()` con los siguientes par√°metros: **texto** = referencia a la celda `Tipificaci√≥n` en la misma fila y **delimitador** = `\"->\"`.\n\nDeber√≠as obtener algo parecido a esto: `=SPLIT(C2;\"->\")`.\n\nDespu√©s, extiende la funci√≥n hasta el final de la hoja haciendo `DOBLE CLIC` en el punto que aparece en la esquina inferior de la celda.\n\nEsta funci√≥n ha dividido la columna `Tipificaci√≥n` en cuatro. Ahora, renombra cada una de las nuevas columnas con encabezados descriptivos y ponlas en otro color para identificarlas. Por ejemplo, `fuente`, `tipo_fenomeno`, `subtipo_fenomeno`, `clase_evento`.\n\nAhora, ya puedes [insertar una tabla din√°mica](https://jaimegutierrez.net/docencia/ejercicios/periodismo-360/workbook-RTVE.html#tablas-din%C3%A1micas-entrevista-a-los-datos) y responder a la pregunta.\n:::\n\n> ¬øCu√°l es el evento que m√°s atenciones del 112 caus√≥ el d√≠a de la dana?\n\n#### A√±ade un `Campo calculado` en la tabla din√°mica del ejercicio anterior para saber el porcentaje de cada evento y lleva estos datos a un gr√°fico en Datawrapper.\n\n> Elige un enfoque para el gr√°fico y trasl√°dalo al titular y al uso del color en la visualizaci√≥n.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n1.  A√±ade un `Campo calculado` en el apartado `Valores` y coloca una columna en el campo `F√≥rmula`. Por ejemplo `fuente`.\n\n2.  Conserva la opci√≥n `Sumar por` como `SUM` y elige `Porcentaje de la columna` en el desplegable `Mostrar como`.\n\n3.  Renombra la columna `Campo calculado 1` como `por_eventos`\n\n4.  Ordena los datos para encontrar f√°cilmente la respuesta: selecciona `Orden` \\> `Descendente` y `Ordenar por` \\> `por_eventos` en las opciones de `Filas`.\n\nAhora puedes llevar esta tabla a Datawrapper para dise√±ar un gr√°fico de `Barras apiladas`, `C√≠rculo` o `Anillo` para representar los datos. Ten en cuenta que tendr√°s que agrupar categor√≠as para facilitar la lectura.\n:::\n\n### üì∫ Esto tambi√©n funciona en la tele\n\n<video width=\"100%\" controls>\n\n<source src=\"img/pieza_llamadas_112_dana_valencia_lh1.mp4\" type=\"video/mp4\">\n\nTu navegador no soporta el elemento de v√≠deo. </video>\n\n## üó∫Ô∏è Mapas de coropletas\n\nLos mapas de coropletas ofrecen una visi√≥n general, pero dan poco detalle. Suelen representar datos sobre un mapa pol√≠tico y son √∫tiles para mostrar o investigar un patr√≥n geogr√°fico.\n\nComo estos mapas comparan una √∫nica variable, normalmente funcionan mejor con datos relativos, como la diferencia (porcentual) entre dos valores o una tasa.\n\n![](img/delitos_narcotrafico_es.webp){fig-align=\"center\" width=\"80%\"}\n\n### üè† Caso pr√°ctico. Compraventa de vivienda en Espa√±a (III)\n\nDise√±a un mapa de coropletas por comunidad autonoma a partir de los datos de variaci√≥n de la compraventa de viviendas del Consejo General del Notariado.\n\n#### Tratamiento de datos \n\nRealiza los c√°lculos necesarios (si no lo has hecho antes) para obtener la variaci√≥n porcentual de la compraventa de viviendas en la √∫ltima d√©cada.\n\n::: {.callout-tip collapse=\"true\" title=\"Recuerda c√≥mo calcular la variaci√≥n porcentual\"}\nCon los datos limpios de la hoja `trabajo`, inserta una tabla din√°mica en la que incluyas `ccaa` como `Filas`, `year` como `Columnas` y `viviendas` como valor. Luego, a√±ade `Filtros` para ocultar las celdas sin datos, `(Vac√≠o)`, y el `TOTAL`; y para ver solo los a√±os `2015` y `2024`.\n\nDesmarca todos los campos `Mostrar totales` y renombra la tabla din√°mica como `compraventa_ccaa`.\n\nDespu√©s de filtrar los datos, a√±ade una columna anexa a la tabla din√°mica `variacion_por` y aplica la f√≥rmula de la variaci√≥n:\n\n$$\\text{% Variaci√≥n} = \\left( \\frac{\\text{nuevo} - \\text{antiguo}}{\\text{antiguo}} \\right) \\times 100$$\n:::\n\n#### Crea un nuevo mapa de coropletas en Datawrapper que se adapte a tus necesidades\n\n::: {.callout-tip collapse=\"true\" title=\"Selecci√≥n de mapa base\"}\n1.  Selecciona el men√∫ `Nuevo` > `Mapa` y elige la opci√≥n `Mapa coropl√©tico`.\n\n2.  En el panel `Selecciona tu mapa` usa el buscador para elegir `Espa√±a ¬ª Comunidades aut√≥nomas`.\n\n3.  Luego, pulsa `Continuar`.\n:::\n\n#### A√±ade los datos tratados al mapa\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn el panel `A√±ade tus datos`, copia y pega los datos de la tabla din√°mica `variacion_por` **sin llevar la primera fila** en el campo de texto libre. Luego, pulsa la flecha para guardar los datos pegados en la tabla. \n\nAvanza al men√∫ `Coincidir`. Ver√°s que los c√≥digos de las provincias no coinciden con la nomenclatura de Datawrapper y aparecen en rojo en la tabla. \n\nComo son pocos datos, la soluci√≥n m√°s rpa√≠da es elegir el nombre de la comunidad correcta en el desplegable de cada celda marcada en rojo. Ver√°s que la fuente no ofrece datos para Ceuta y Melilla.\n\nSi en lugar de un mapa de comunidades aut√≥nomas fuese un mapa de municipios, es m√°s eficiente hacer un diccionario en Google Sheets y usar la funci√≥n `BUSCARV()` en la hoja `trabajo`.\n\nEn el men√∫ `Coincidir` tambi√©n puedes elegir la columna en la que se encuentran los datos que pintar√°n en mapa. En este caso, selecciona `variacion` en `Seleccionar columna para Values`.\n\nPulsa `Continuar` hasta llegar al panel `Visualizaci√≥n`.\n:::\n\n#### Elige la escala que mejor se adapta al mapa y personaliza los colores y la leyenda\n\n::: {.callout-tip collapse=\"true\" title=\"Elegir la escala\"}\nComo queremos ofrecer una  una foto fija sin hacer comparaciones, nuestra apuesta inicial es la escala **Jenks**. Para aplicarla, sigue estos pasos: \n\n1.    Define una escala de `pasos` en `Colores > Tipo`.\n\n2.    En el men√∫ desplegable de `Colores > Pasos`, selecciona `Intervalos naturales (Jenks)`. Luego, decide el n√∫mero de pasos que mejor se adapte a los datos. \n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Personalizar colores y leyenda\"}\nComo nuestra variaci√≥n siempre es positiva, podemos elegir cualquier **escala secuencial** en `Colores > Seleccionar paleta`.\n\nAdem√°s, podemos personalizar algunos campos en el men√∫ `Leyenda`:\n\n-   `Posici√≥n`: coloca la leyenda en la `Parte superior izquierda` de la visualizaci√≥n.\n\n-   `Orientaci√≥n`: elige `Vertical` para que la leyenda ocupe penos en un lateral del mapa.\n:::\n\n#### Escribe un t√≠tulo para el mapa y a√±ade anotaciones\n\nA√±adir etiquetas facilita que el usuario encuentre e identifique los territorios. Ten en cuenta que no deben ser muchas. Elige las m√°s estrat√©gicas para cumplir esta funci√≥n.\n\n::: {.callout-tip collapse=\"true\" title=\"Anotaciones en mapas de coropletas\"}\nDespu√©s de decidir un t√≠tulo para el mapa y a√±adir las fuentes, activa la opci√≥n `Etiquetas del mapa` > `Mostrar etiquetas` para que Datawrapper muestre autom√°ticamente el nombre de algunas ciudades. \n\nComo estamos ante un mapa de comunidades aut√≥nomas, quiz√°s es √∫til mostrar solo las capitales auton√≥micas. \n:::\n\n## üß† Tu turno (VI)\n\n### üö≤ Caso pr√°ctico. Estaciones Sevici (V)\n\nDise√±a un mapa de coropletas que represente la tasa de aros para aparcar bicicletas en cada distrito de Sevilla.\n\n::: {.callout-warning title=\"¬°Cuidado!\"}\nDatawrapper no dispone de un mapa de distritos de la ciudad de Sevilla, pero puedes descargarlo y a√±adirlo a la herramienta con el siguiente tutorial:\n\nüìò [Tutorial](https://academy.datawrapper.de/article/145-how-to-upload-your-own-map)\n\nüîó [Mapa de distritos de Sevilla](datos/distritos_sevilla.geojson)\n:::\n\n#### Tratamiento de datos \n\nRealiza los c√°lculos necesarios (si no lo has hecho antes) para obtener la tasa de aros de aparcabici por cada 1.000 habitantes en cada distrito.\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn `aros_aparcabicis_distrito` crea una nueva columna que se llame `pob_distrito` para traer a esta tabla la poblaci√≥n de cada distrito desde `poblacion_distritos` con `BUSCARV()`\n\nA continuaci√≥n, crea la columna `aros_1000_hab` y escribe la f√≥rmula para calcular la tasa:\n\n(`SUM de aros` / `pob_distrito`)\\*1000\n\nTambi√©n puedes calcular la tasa con la opci√≥n `Campo calculado` de la tabla din√°mica `aros_aparcabicis_distrito`. Renombra la columna `aros` de la hoja `trabajo`, ya que los campos calculados no distinguen entre may√∫sculas y min√∫sculas, por lo que *no debe haber dos columnas con el mismo nombre*.\n\nEn el editor de la tabla din√°mica, a√±ade un `Campo calculado` en `Valores`. Configura el campo `Sumar por` como `Personalizado` y `Mostrar como` como `Predeterminado`.\n\nCrea una f√≥rmula para calcular la tasa en el campo `F√≥rmula`. Tenemos que dividir la suma de aros de cada distrito entre la poblaci√≥n de ese distrito y multiplicar el resultado por 1.000. Para ello, usaremos las funciones `SUMA()` y `UNIQUE()`, ya que queremos usar el dato de poblaci√≥n una sola vez y no su agregado.\n\n`=(SUMA(aros_clean)/unique(pob_distrito))*1000`\n\nRecuerda que puedes renombrar la columna de campo calculado como `aros_1000_hab` haciendo doble clic en el encabezado.\n\nPara reordenar los datos de la tabla din√°mica y sacar conclusiones, basta con elegir `Orden > Descendente` y `Ordenar por > aros_1000_hab` en el apartado `Filas` del `Editor de tablas din√°micas`.\n:::\n\n#### Crea un nuevo mapa de coropletas en Datawrapper e importa el archivo `distritos_sevilla.geojson` como mapa base\n\n::: {.callout-tip collapse=\"true\" title=\"Importar un mapa base personalizado en Datawrapper\"}\n1.  Selecciona el men√∫ `Nuevo` > `Mapa` y elige la opci√≥n `Mapa coropl√©tico`.\n\n2.  En el panel `Selecciona tu mapa` pulsa el bot√≥n `Cargar mapa` y selecciona el archivo `distritos_sevilla.geojson`. Si todo ha ido bien, el mapa aparecer√° en gris en la parte derecha de la pantalla.\n\n3.  Luego, pulsa `Continuar`.\n:::\n\n#### A√±ade los datos tratados al mapa\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn el panel `A√±ade tus datos`, copia y pega los datos de la tabla din√°mica `aparcabicis_distrito` **sin llevar la soma total** en el campo de texto libre. Luego, pulsa la flecha para guardar los datos pegados en la tabla. \n\nAvanza al men√∫ `Coincidir` y revisa que la `Clave coincidente` es la misma que el identificador del mapa.\n\nEn el men√∫ `Coincidir` tambi√©n puedes elegir la columna en la que se encuentran los datos que pintar√°n en mapa. En este caso, selecciona `tasa_por_mil` en `Seleccionar columna para Values`.\n\nPulsa `Continuar` hasta llegar al panel `Visualizaci√≥n`.\n:::\n\n#### Elige la escala que mejor se adapta al mapa y personaliza los colores y la leyenda\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nComo queremos ofrecer una  una foto fija sin hacer comparaciones, nuestra apuesta inicial es la escala **Jenks**. Para aplicarla, sigue estos pasos: \n\n1.    Define una escala de `pasos` en `Colores > Tipo`.\n\n2.    En el men√∫ desplegable de `Colores > Pasos`, selecciona `Intervalos naturales (Jenks)`. Luego, decide el n√∫mero de pasos que mejor se adapte a los datos. \n\nComo estamos usando una tasa que no tiene valores negaticos, podemos elegir cualquier **escala secuencial** en `Colores > Seleccionar paleta`.\n:::\n\n#### Escribe un t√≠tulo para el mapa y a√±ade anotaciones\n\n::: {.callout-tip collapse=\"true\" title=\"Anotaciones en mapas de coropletas\"}\nDespu√©s de decidir un t√≠tulo para el mapa y a√±adir las fuentes, activa la opci√≥n `Etiquetas del mapa` > `Mostrar etiquetas` para que Datawrapper muestre autom√°ticamente el nombre de algunos distritos.\n\nAlternativamente, puedes activar la opci√≥n `Tipo > Por columna` y elegir el campo `tasa_por_mil` en `Seleccionar columna`. Luego, el `Formato num√©rico` que mejor se adapte a los datos para que cada distrito muestre el valor.\n:::\n\n> ¬øObservas alg√∫n patr√≥n geogr√°fico en el mapa?\n\n## üìç Localizadores\n\nLos localizadores son **mapas est√°ticos** y simples que se usan para ubicar una regi√≥n concreta en un contexto geogr√°fico. Ayudan al usuario a familiarizarse con las particularidades de una localizaci√≥n que quiz√°s no conocen de antemano.\n\nDatawrapper nos permite elaborar localizadores de forma r√°pida y sencilla.\n\nTen en cuenta los siguientes consejos:\n\n-   **Ofrece contexto**. Los localizadores son una herramienta de ubicaci√≥n, por lo que conviene que el lector pueda encontrarse en el mapa.\n\n-   **A√±ade contexto fuera del mapa**. Si los elementos m√°s reconocibles quedan fuera del mapa, a√±ade indicaciones para encontrarlos. Y, cuando sea necesario, no olvides usar un localizador que permita encontrar el lugar que est√°s mostrando en un pais o regi√≥n.\n\n-   **Rutas, distancias y √°reas**. Datawrapper permite a√±adir l√≠neas y pol√≠gonos para destacar distancias, recorridos y √°reas. No olvides activar la barra de escala en tu mapa para que los lectores puedan entender las distancias.\n\n-   **Destaca lo importante**. Selecciona el mapa base teniendo en cuenta las caracter√≠sticas de la historia y el enfoque primoridial: geogr√°fico, geopol√≠tico, urbano... Adem√°s, usa s√≠mbolos e iconos que permitan leer el gr√°fico de un vistazo.\n\n-   **Establece jerarqu√≠a en las anotaciones**. Los textos deben ser concisos y estar ordenados.\n\n::: {.callout-important title=\"Prioriza la vista m√≥vil\"}\nDatawrapper permite distinguir entre anotaciones para escritorio (*desktop*) y para m√≥vil (*mobile*). Activa la vista m√≥vil del mapa y observa si el resultado es legible.\n\n-   **Oculta** anotaciones secundarias para que solo se vean en la versi√≥n de escritorio.\n\n-   **Duplica y reordena** las anotaciones esenciales para tener una vista en escritorio y otra en el m√≥vil.\n:::\n\n[![Letrinas junto a pozos de agua en campamentos de rohiny√° de Bangladesh, Reuters](img/letrinas_bangladesh_reuters.webp){fig-align=\"center\" width=\"80%\"}](https://www.reuters.com/graphics/MYANMAR-ROHINGYA/010051VB46G/)\n\nConsulta m√°s informaci√≥n en [*Fix my chart ¬ª Maps as guides*, Rose Mintzer-Sweeney](https://www.datawrapper.de/blog/fix-my-chart-map-guides)\n\n### üåèÔ∏è Caso pr√°ctico. Apu√±alamiento masivo en un centro comercial de S√≠dney\n\nReproduce en Datawrapper el localizador de la noticia sobre un [apu√±alamiento masivo en un centro comercial de S√≠dney](https://www.rtve.es/noticias/20240413/apunalamiento-masivo-centro-comercial-sidney-australia/16058765.shtml) que dej√≥ seis muertos en abril de 2024.\n\n> ¬øQu√© mejoras se te ocurren para este mapa?\n\n![](img/ataque_sidney.webp){fig-align=\"center\" width=\"80%\"}\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo a√±adir una fotograf√≠a en un localizador?\"}\nPara a√±adir una fotograf√≠a en la anotaci√≥n de un localizador, necesitamos tener la imagen alojada en un servidor que ofrezca una url. Luego, podemos usar el siguiente html en el campo `texto` del marcador:\n\n``` html\n<img style='width:40vw; position:absolute; top:0px; left:0px;\nborder:2px solid white; border-radius:5%; padding:5px; background:white;'\n\nsrc='URL_DE_MI_FOTO'/>\n```\nPar√°metros importantes:\n\n-   **width**: expresa el ancho de la fotograf√≠a en anchura de la ventana gr√°fica (vw = viewport-width). Funciona como un porcentaje. \n\n-   **border-radius**: indica como porcentaje la redondez de las esquinas del cuadro en el que se inserta la imagen.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"¬øC√≥mo insertar una l√≠nea o √°rea destacada?\"}\nEn el panel de marcadores, podemos activar la opci√≥n `Importar marcadores de l√≠nea y √°rea` para bien importar un archivo `.json` bien dibujar el √°rea a mano alzada en la web [geojson.io](https://geojson.io/#map=2/0/20). En el segundo caso, una vez hecho el dibujo, basta con copiar y pegar el c√≥digo json en el campo libre de Datawrapper. \n\nM√°s iformaci√≥n: [*How to insert images almost anywhere*](https://academy.datawrapper.de/article/248-how-to-insert-images#tooltips)\n:::\n\n## üß† Tu turno (VII)\n\n### üí•Ô∏è Caso pr√°ctico. Choque de un avi√≥n de pasajeros y un helic√≥ptero militar cerca de Washington\n\nCrea un localizador para la noticia del accidente de un accdiente a√©reo en el que un avi√≥n comercial con 60 pasajeros y cuatro miembros de la tripulaci√≥n a bordo ha chocado en el aire contra un helic√≥ptero Black Hawk del Ej√©rcito estadounidense cerca del Aeropuerto Nacional Ronald Reagan en Washington D. C. \n\n-   üìç Coordenadas del accidente: `38.84549775906376,-77.02724673657315`\n\n-   üì∏ Imagen del accidente: [Descargar](https://www.rtve.es/contenidos/fotos/datos/2025/accidente_ws.jpg)\n\n::: {.callout-note title=\"Consejo\"}\nRecuerda destacar elementos reconocibles del entorno que permitan que la audiencia reconozca el lugar de los hechos.\n\nPuedes usar la plataforma gratuita [freeimage.host](https://freeimage.host/es) para alojar tu imagen.\n:::\n\n## üîÑ Antes y despu√©s con Flourish\n\nEntre las herramientas de narrativa visual que ofrece Flourish, destaca la opci√≥n de crear fotograf√≠as interactivas para mostrar el antes y despu√©s de un hecho.\n\nEsta narraci√≥n funciona cuando disponemos de dos fotograf√≠a con el mismo encuadre entre las que se ha producido un cambio apreciable a simple vista.\n\n<div class=\"flourish-embed flourish-photo-slider\" data-src=\"visualisation/22535464\"><script src=\"https://public.flourish.studio/resources/embed.js\"></script><noscript><img src=\"https://public.flourish.studio/visualisation/22535464/thumbnail\" width=\"100%\" alt=\"photo-slider visualization\" /></noscript></div>\n\n\n### üíß Caso pr√°ctico. Las lluvias alivian la sequ√≠a en el pantano de Sau\n\nLas abundantes lluvias de marzo de 2025 han servido para aliviar la sequ√≠a en el pantano de Sau, en Barcelona. A comienzos de abril, el embalse se encuentra al 66,7% de su capacidad. Son 63 puntos m√°s que en la misma fecha de 2024, cuando el pantano solo conten√≠a un 3,64% de su capacidad. \n\nCon estos datos y las fotograf√≠as del sat√©lite [Sentinel-2](https://apps.sentinel-hub.com/eo-browser/), responde a la siguiente pregunta:\n\n-   üîó [Foto antes (1 de abril de 2024)](img/pantano_sau_20240401.jpg)\n\n-   üîó [Foto despu√©s (1 de abril de 2025)](img/pantano_sau_20250401.jpg)\n\n#### Genera un slider de antes y despu√©s del pantano de Sau \n\n> Usa los datos de la descripci√≥n del caso pr√°ctico para escribir el t√≠tulo y subt√≠tulo de la visualizaci√≥n\n\n::: {.callout-tip collapse=\"true\" title=\"Crear un slider en Flourish\"}\n1.  Si no tienes una cuenta en Flourish, cr√©ala.\n\n2.  Pulsa el bot√≥n `+ New visualization` y elige la opci√≥n `Photo slider` > `Before and after`.\n\n3.  En el men√∫ `Photos` carga la fotograf√≠a m√°s reciente en `PHOTO 1` y la m√°s antigua, en `PHOTO 2`.\n\n4.  Completa los campos `Title` y `Subtitle` en el men√∫ `Header`. Puedes ajustar el tama√±o y el estilo del texto si activas el bot√≥n `Styling` en cada caso.\n\n5.  En el men√∫ `Footer`, indica la fuente de las im√°genes en el campo `Text > Source name` y a√±ade el enlace a la misma en `Text > Source url`.\n\n6.  Cuando todo est√© listo, pulsa el bot√≥n `Export & publish` en la esquina superior derecha de la pantalla para obtener el enlace al gr√°fico y el c√≥digo de inserci√≥n.\n:::\n\n## üß† Tu turno (VIII)\n\n### üèóÔ∏è Caso pr√°ctico. Restauraci√≥n de la catedral de Notre-Dame de Par√≠s\n\nEl 15 de abril de 2019, un incendio provoc√≥ da√±os catastr√≥ficos en la catedral de Notre-Dame de Par√≠s. Cinco a√±os despu√©s, el 8 de diciembre de 2024, se reabre al culto como nueva. \n\nEl altar sobrevivi√≥ milagrosamente y ahora luce con renacido esplendor.\n\n#### Genera un slider de antes y despu√©s del altar de Notre-Dame\n\n> Descarga las siguientes fotograf√≠as proporcionadas por el Patronato para la Reconstrucci√≥n de Notre-Dame y genera la visualizaci√≥n en Flourish.\n\n-   üîó [Altar Notre-Dame tras el incendio](img/altar_notre_dame_antes.jpg)\n\n-   üîó [Altar Notre-Dame tras la restauraci√≥n](img/altar_notre_dame_despues.jpg)\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n\n1.  Pulsa el bot√≥n `+ New visualization` y elige la opci√≥n `Photo slider` > `Before and after`.\n\n2.  En el men√∫ `Photos` carga la fotograf√≠a m√°s reciente en `PHOTO 1` y la m√°s antigua, en `PHOTO 2`.\n\n3.  Completa los campos `Title` y `Subtitle` en el men√∫ `Header`. Puedes ajustar el tama√±o y el estilo del texto si activas el bot√≥n `Styling` en cada caso.\n\n4.  En el men√∫ `Footer`, indica la fuente de las im√°genes en el campo `Text > Source name` y a√±ade el enlace a la misma en `Text > Source url`.\n\n5.  Cuando todo est√© listo, pulsa el bot√≥n `Export & publish` en la esquina superior derecha de la pantalla para obtener el enlace al gr√°fico y el c√≥digo de inserci√≥n.\n:::\n\n## üñ±Ô∏è Scrollytelling\n\nEl scrollytelling puede definirse como una herramienta narrativa que combina conceptos de **storytelling** con el **scroll**. \n\n> \"Mientras el usuario recorre la p√°gina, la narrativa visual se despliega de forma din√°mica, enriqueciendo la experiencia y ofreciendo al usuario una sensaci√≥n de control sobre el contenido\".\n\n[*From storytelling to scrollytelling ‚Äì modern\ndigital publications that strengthen and develop the data literacy of our users*](https://unece.org/sites/default/files/2023-08/DissComm2023_S3_Switzerland_Ghanfili_Paper.pdf), Pedram Ghanfili\n\n### ‚òéÔ∏è Caso pr√°ctico. Llamadas al 112 durante la dana de Valencia (III)\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::{.cr-section}\n\n:::{#cr-main-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-base-plot-1.png){width=768}\n:::\n:::\n\n\n\n:::\n\n:::{#cr-15-17-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-15-17-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-requena-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-requena-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-utiel-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-utiel-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-chiva-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-chiva-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-paiporta-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-paiporta-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-cecopi-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-cecopi-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{#cr-cecopi2-plot}\n\n\n::: {.cell fig.bg='transparent'}\n::: {.cell-output-display}\n![](workbook-RTVE_files/figure-html/dana-cecopi2-plot-1.png){width=768}\n:::\n:::\n\n\n:::\n\n:::{focus-on=\"cr-main-plot\"}\n<b style=\"font-size:120%; line-height: 1.1\">El 112 atendi√≥ casi 20.000 llamadas el d√≠a de la dana</b>\n\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">El tel√©fono de emergencias 112 recibi√≥ el d√≠a de las inundaciones por la dana, el 29 de octubre, un total de **19.821 llamadas** y gestion√≥ **4.770 incidentes** en la provincia de Valencia, seg√∫n ha comunicado a la jueza de Catarroja.\n<br><br>\nEsta es la cronolog√≠a de aquel dia.</span>\n:::\n\n:::{focus-on=\"cr-15-17-plot\"}\n**15:00 - 17:00**\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">El n√∫mero de llamadas se incrementa a partir de las 15:00 horas y alcanza su pico a las 17:00, con **2.438 peticiones de auxilio**. En esas tres horas, al 112 ya se le hab√≠an reportado **584 incidentes**.</span>\n:::\n\n:::{focus-on=\"cr-requena-plot\"}\n**14:07**<br>\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">Seis trabajadores de **Requena** llaman para avisar de que se han puesto a salvo subi√©ndose a una plataforma elevada de la nave industrial en la que trabajan.</span>\n:::\n\n:::{focus-on=\"cr-utiel-plot\"}\n**14:45**<br>\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">Menos de una hora despu√©s comienzan las llamadas desde **Utiel**. Los vecinos dicen que hay personas mayores atrapadas.<br><br>\n*Escuchan gritar a una anciana en planta baja.*</span>\n:::\n\n:::{focus-on=\"cr-chiva-plot\"}\n**16:40**<br>\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">Un vecino de **Chiva** alerta de que en su casa no para de entrar agua.</span>\n:::\n\n:::{focus-on=\"cr-paiporta-plot\"}\n**18:32**<br>\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">Otro vecino alerta a las autoridades justo cuando comienza la reuni√≥n del CECOPI:<br><br>\n<i>En **Paiporta** se est√° desbordando el **Barranco del Poyo** y no han cortado la zona</i>.</span>\n:::\n\n:::{focus-on=\"cr-cecopi-plot\"}\n**20:11**<br>\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">La Generalitat no env√≠a la **alarma a los m√≥viles** hasta pasadas las 20:00 horas.</span>\n:::\n\n:::{focus-on=\"cr-cecopi2-plot\"}\n<span style = \"font-size:70%; line-height: 1.2; display:inline-block;\">Para entonces, el 112 ya hab√≠a registrado **1.241 incidentes y casi 15.200 llamadas**.</span>\n:::\n:::\n\n### Reproduce el scrolly anterior utilizando la herramienta `Story` de Flourish\n\n#### Descarga los datos de llamadas al 112 cada 10 minutos el d√≠a de la dana\n\n-   üîó [llamadas_112_valencia_minutoaminuto.csv](datos/llamadas_112_valencia_minutoaminuto.csv)\n\n#### Crea un nuevo gr√°fico de de puntos en Flourish y carga los datos\n\n![](img/flourish_scatter_plot.webp){fig-align=\"center\" width=\"80%\"}\n\n> Este gr√°fico ser√° la base de tu scrolly \n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\n\n1.  Selecciona el bot√≥n `+ New visualization` y busca la opci√≥n `Basic scatter plot`.\n\n2.  N√≥mbralo como `112 gr√°fico base`\n\n2.  Pincha el bot√≥n `Data` en la barra de opciones superior para acceder al panel de carga de datos.\n\n3.  En `Upload data` selecciona el archivo `llamadas_112_valencia_minutoaminuto.csv`.\n\n4.  En el cuadro de di√°logo `Ready to import` no modifiques nada y pulsa `Import`. Aparecer√° el mensaje \"109 rows were uploaded!\". Si es as√≠, elige `Continue`.\n:::\n\n#### Observa los datos para entender qu√© significa cada columna\n\n-   **hora_minuto**. Franja horaria en la que se han producido los accidentes.\n\n-   **incidentes**. Recuendo de incidentes en esa franja de 10 minutos.\n\n-   **hora**. Hora a la que se produjeron los incidentes.\n\n-   **minuto**. Secci√≥n de 10 minutos en la que se produjeron los accidentes.\n\n#### Elige las columnas que van a formar tu gr√°fico de puntos\n\n> Un scatter plot requiere al menos dos indicadores para posicionar los puntos en el eje x y el eje y\n\n::: {.callout-tip collapse=\"true\" title=\"Soluci√≥n\"}\nEn el panel lateral del men√∫ `Data`, indica la columna `minuto (D)` como `X values` y `hora (C)` como `Y values`.\n\nPara el tama√±o de los puntos, toma la columna `incidentes (B)` como referencia para el campo `Size`.\n:::\n\n#### Ajusta los estilos de tu gr√°fico en el panel `Preview`\n\n> Para mejorar el gr√°fico, modifica el color y el contorno de los puntos, reposiciona el eje x en la parte superior del gr√°fico, cambiar el m√°ximo y m√≠nimo de ese eje para que no se amontonen los valores y los puntos, modificar la direcci√≥n del eje, renombrar los dos ejes, desactivar los popups y escribir la fuente.\n\n::: {.callout-tip collapse=\"true\" title=\"Modificar el color y el contorno de los puntos\"}\nEn el men√∫ lateral, despliega el panel `Scatter` y elige `POINT SETTING` > `Color` para convertirlos en rojo.\n\nEl contorno pudes modificarlo en `POINT OUTLINE` > `Color` eligiendo un tono blanco. \n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Mover el eje x a la parte superior y cambiar el nombre\"}\nEn el men√∫ lateral, despliega el panel `X Axis` y elige `Position` > `Top`.\n\nEn este eje, mostraremos solo los valores de diez en diez. Para hacerlo, \n\nEl nombre del eje se puede cambiar en `AXIS TITLE > Type > Custom` de este mismo panel. Por jemplo, \"Minuto a minuto\".\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Ajustar el m√°ximo y m√≠nimo del eje x\"}\nEn el men√∫ lateral, despliega el panel `X Axis` y escribe `-2` en el campo `SCALE > Min` y `54` en `SCALE > Max`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Cambiar la direcci√≥n del eje y y renombrarlo\"}\nEn el panel `Y axis`, ve a `SCALE` y activa `Flip axis`.\n\nEl nombre del eje se puede cambiar en el panel `Y Axis`, yendo a `AXIS TITLE > Type > Custom` de este mismo panel. Por jemplo, \"Hora del d√≠a\".\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"Desactivar los popus\"}\nEn el panel `Popups & panel`, selecciona `None`.\n:::\n\n::: {.callout-tip collapse=\"true\" title=\"A√±adir fuente del gr√°fico\"}\nEn el panel `Fotter`, escribe \"112 Generalitat Valenciana\" en el campo `Source name` y \"Fuente:\" en `Source label`. \n:::\n\n#### Duplica tu grafico base para hacer tantas versiones como vistas sean necesarias para la historia\n\nEn este caso har√°n falta **7 versiones** cuya apariencia controlaremos a trav√©s de una nueva columna de color.\n\n-   **112 Franja pico**, con los datos de las 15:00 a las 17:00,\n\n-   **112 Requena**, para destacar la llamada de Requena.\n\n-   **112 Utiel**, para destacar la llamada de Utiel.\n\n-   **112 Chiva**, para destacar la llamada de Chiva.\n\n-   **112 Paiporta**, para destacar la llamada de Paiporta.\n\n-   **112 aviso**, para destacar la hora a la que el CECOPI env√≠a el aviso.\n\n-   **112 acumulado**, para destacar las llamadas e incidencias acumuladas hasta las 20:11 horas.\n\n\n::: {.callout-tip collapse=\"true\" title=\"Duplicar gr√°fico y crear versiones\"}\nDesde el men√∫ principal de Flourish, col√≥cate sobre tu gr√°fico y selecciona el icono `Duplicate this visualization`.\n\nModifica el nombre del gr√°fico para poder identificar la versi√≥n.\n\nEn el panel `Data`, inserta una nueva columna a la derecha como har√≠as en Google Sheets y ll√°mala `destacado`. Luego, escribe una x en las celdas de los datos que quieres destacar.\n\nA√±ade la columna `destacado (E)` en el campo `Color` del men√∫ lateral. Ver√°s que los colores del gr√°fico cambian.\n\nVuelve al panel panel `Preview` y despliega el men√∫ `Colors`. Despliega `Palette` y elige `Edit color palette`. \n\nEn el siguiente paso, elimina opciones de color hasta quedarte solo con dos variables. Configura el **color m√°s claro para la primera** y el **m√°s oscuro para la segunda**.\n\nRepite este proceso tantas veces como versiones del gr√°fico necesites. \n:::\n\n#### Crea una nueva hist√≥rica, a√±ade tus gr√°ficos y escribe el texto\n\nLa opci√≥n `Story` de Flourish sirve para combinar gr√°ficos como si fueran una presentaci√≥n de PowerPoint y que el usuario pueda navegar entre ellos. \n\nAdem√°s, permite escribir un texto sobre cada visualizaci√≥n para mejorar la narraci√≥n de la historia.\n\n::: {.callout-tip collapse=\"true\" title=\"Hacer un scrolly en Flourish\"}\n1.    En el men√∫ principal, selecciona `+ New story` y ponle un t√≠tulo.\n\n2.    Desde la pantalla inicial, pulsa en `Choose a visualization` y elige la primera visualizaci√≥n de la historia. Normalmente, ser√° tu gr√°fico base.\n\n3.    Escribe tu texto en `Add caption here`.\n\n4.    Para a√±adir un nuevo paso a la historia, pulsa el bot√≥n `+ New slide` en la barra lateral y repite el proceso.\n\nLos botones de navegaci√≥n de la parte superior del gr√°fico permiten avanzar en la historia y Flourish genera una animaci√≥n entre las distintas vistas del gr√°fico.\n:::\n\n",
    "supporting": [
      "workbook-RTVE_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}